/**
 * 角色标识组件样式
 * 用于标识用户角色（学生、家长、老师）
 */

.role-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  transition: var(--transition-base);
}

.role-badge--clickable {
  cursor: pointer;
}

.role-badge--clickable:hover {
  opacity: 0.8;
  transform: scale(1.05);
}

.role-badge--clickable:active {
  transform: scale(0.95);
}

/* ========== 徽章样式 ========== */
.role-badge--badge {
  padding: var(--size-padding);
  background-color: var(--role-bg-color);
  color: var(--role-color);
  border-radius: var(--border-radius-md);
  font-size: var(--size-font);
  font-weight: var(--font-weight-medium);
  line-height: 1;
  gap: var(--spacing-xs);
  min-height: var(--size-height);
  border: 1rpx solid var(--role-color);
}

.role-badge--badge.role-badge--small {
  border-radius: var(--border-radius-sm);
}

.role-badge--badge.role-badge--large {
  border-radius: var(--border-radius-lg);
}

.role-badge__icon {
  font-size: var(--size-icon);
  color: var(--role-color);
}

.role-badge__text {
  font-size: var(--size-font);
  color: var(--role-color);
  white-space: nowrap;
}

/* ========== 标签样式 ========== */
.role-badge--tag {
  background-color: var(--role-light-color);
  border-radius: var(--border-radius-xl);
  padding: var(--size-padding);
  min-height: var(--size-height);
}

.role-badge__tag-content {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.role-badge__tag-icon {
  font-size: var(--size-icon);
  color: var(--role-color);
}

.role-badge__tag-text {
  font-size: var(--size-font);
  color: var(--role-color);
  font-weight: var(--font-weight-medium);
  white-space: nowrap;
}

/* ========== 头像样式 ========== */
.role-badge--avatar {
  flex-direction: column;
  gap: var(--spacing-xs);
}

.role-badge__avatar {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-xs);
}

.role-badge__avatar-bg {
  width: var(--size-avatar);
  height: var(--size-avatar);
  border-radius: 50%;
  background-color: var(--role-bg-color);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2rpx solid var(--role-color);
  position: relative;
}

.role-badge__avatar-icon {
  font-size: calc(var(--size-avatar) * 0.5);
  color: var(--role-color);
}

.role-badge__avatar-text {
  font-size: var(--size-font);
  color: var(--role-color);
  font-weight: var(--font-weight-medium);
  text-align: center;
  white-space: nowrap;
}

/* ========== 在线状态指示器 ========== */
.role-badge__online-indicator {
  width: 16rpx;
  height: 16rpx;
  border-radius: 50%;
  background-color: #d9d9d9;
  border: 2rpx solid #ffffff;
  transition: var(--transition-base);
}

.role-badge__online-indicator--active {
  background-color: var(--success-color);
}

/* 徽章模式的在线指示器 */
.role-badge--badge .role-badge__online-indicator {
  position: absolute;
  top: -4rpx;
  right: -4rpx;
}

/* 标签模式的在线指示器 */
.role-badge__online-indicator--tag {
  margin-left: var(--spacing-xs);
}

/* 头像模式的在线指示器 */
.role-badge__online-indicator--avatar {
  position: absolute;
  bottom: 4rpx;
  right: 4rpx;
  width: 20rpx;
  height: 20rpx;
}

/* ========== 角色特定样式 ========== */
.role-badge--student {
  --role-color: #1890ff;
  --role-bg-color: #e6f7ff;
  --role-light-color: rgba(24, 144, 255, 0.1);
}

.role-badge--parent {
  --role-color: #52c41a;
  --role-bg-color: #f6ffed;
  --role-light-color: rgba(82, 196, 26, 0.1);
}

.role-badge--teacher {
  --role-color: #faad14;
  --role-bg-color: #fffbe6;
  --role-light-color: rgba(250, 173, 20, 0.1);
}

/* ========== 尺寸特定样式 ========== */
.role-badge--small {
  --size-font: 20rpx;
  --size-padding: 4rpx 8rpx;
  --size-icon: 24rpx;
  --size-height: 32rpx;
  --size-avatar: 48rpx;
}

.role-badge--medium {
  --size-font: 24rpx;
  --size-padding: 6rpx 12rpx;
  --size-icon: 32rpx;
  --size-height: 40rpx;
  --size-avatar: 64rpx;
}

.role-badge--large {
  --size-font: 28rpx;
  --size-padding: 8rpx 16rpx;
  --size-icon: 40rpx;
  --size-height: 48rpx;
  --size-avatar: 80rpx;
}

/* ========== 动画效果 ========== */
.role-badge--clickable:hover .role-badge__avatar-bg {
  box-shadow: 0 0 0 4rpx var(--role-light-color);
}

.role-badge--clickable:hover .role-badge__online-indicator--active {
  animation: pulse-green 1s infinite;
}

@keyframes pulse-green {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.2);
  }
}

/* ========== 特殊状态 ========== */
.role-badge--disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

.role-badge--loading {
  opacity: 0.6;
}

.role-badge--loading .role-badge__text,
.role-badge--loading .role-badge__tag-text,
.role-badge--loading .role-badge__avatar-text {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading-shimmer 1.5s infinite;
  color: transparent;
  border-radius: 4rpx;
}

@keyframes loading-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* ========== 响应式设计 ========== */
@media (max-width: 375px) {
  .role-badge--small {
    --size-font: 18rpx;
    --size-icon: 20rpx;
    --size-avatar: 40rpx;
  }

  .role-badge--medium {
    --size-font: 22rpx;
    --size-icon: 28rpx;
    --size-avatar: 56rpx;
  }
}

/* ========== 深色模式适配 ========== */
@media (prefers-color-scheme: dark) {
  .role-badge--badge {
    background-color: var(--role-light-color);
  }

  .role-badge__avatar-bg {
    background-color: var(--role-light-color);
  }

  .role-badge__online-indicator {
    border-color: var(--background-color-dark);
  }
}

/* ========== 无障碍访问 ========== */
.role-badge:focus {
  outline: 2rpx solid var(--role-color);
  outline-offset: 2rpx;
}

.role-badge--clickable:focus {
  outline: 2rpx solid var(--primary-color);
  outline-offset: 2rpx;
}

/* ========== 打印样式 ========== */
@media print {
  .role-badge {
    break-inside: avoid;
  }

  .role-badge__online-indicator {
    display: none;
  }

  .role-badge--clickable:hover {
    transform: none;
  }
}
