{
  "task": "5.5 - 安全性和生产部署",
  "timestamp": "2025-09-28 15:46:46",
  "summary": {
    "total_tests": 32,
    "passed_tests": 31,
    "failed_tests": 1,
    "success_rate": 96.875
  },
  "results": [
    {
      "test": "安全头配置完整性",
      "status": "✅ PASS",
      "passed": true,
      "details": "所有关键安全头已配置"
    },
    {
      "test": "环境差异化配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "支持生产和开发环境不同配置"
    },
    {
      "test": "CORS配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "配置了CORS源"
    },
    {
      "test": "限流配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "限流配置完整"
    },
    {
      "test": "安全中间件",
      "status": "✅ PASS",
      "passed": true,
      "details": "所有安全中间件已配置"
    },
    {
      "test": "限流算法实现",
      "status": "✅ PASS",
      "passed": true,
      "details": "限流算法实现完整"
    },
    {
      "test": "限流类型定义",
      "status": "✅ PASS",
      "passed": true,
      "details": "定义了限流类型枚举"
    },
    {
      "test": "环境管理脚本存在",
      "status": "✅ PASS",
      "passed": true,
      "details": null
    },
    {
      "test": "环境配置模板",
      "status": "✅ PASS",
      "passed": true,
      "details": "找到4个模板文件"
    },
    {
      "test": "环境管理命令",
      "status": "✅ PASS",
      "passed": true,
      "details": "list命令执行成功"
    },
    {
      "test": "Docker多阶段构建",
      "status": "✅ PASS",
      "passed": true,
      "details": "包含builder和runtime阶段"
    },
    {
      "test": "Docker安全配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "使用非root用户"
    },
    {
      "test": "Docker健康检查",
      "status": "✅ PASS",
      "passed": true,
      "details": "配置了健康检查"
    },
    {
      "test": "Docker Compose服务",
      "status": "✅ PASS",
      "passed": true,
      "details": "所有必需服务已配置"
    },
    {
      "test": "Docker资源限制",
      "status": "✅ PASS",
      "passed": true,
      "details": "配置了资源限制"
    },
    {
      "test": "Docker密钥管理",
      "status": "✅ PASS",
      "passed": true,
      "details": "配置了密钥管理"
    },
    {
      "test": "Nginx安全配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "安全配置完整"
    },
    {
      "test": "Nginx SSL配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "配置了SSL和HTTPS重定向"
    },
    {
      "test": "Nginx反向代理",
      "status": "✅ PASS",
      "passed": true,
      "details": "配置了反向代理和上游服务器"
    },
    {
      "test": "Nginx限流配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "配置了请求和连接限流"
    },
    {
      "test": "密钥管理脚本",
      "status": "✅ PASS",
      "passed": true,
      "details": null
    },
    {
      "test": "密钥文件生成",
      "status": "✅ PASS",
      "passed": true,
      "details": "找到6个密钥文件"
    },
    {
      "test": "密钥文件权限",
      "status": "✅ PASS",
      "passed": true,
      "details": "所有密钥文件权限正确(600)"
    },
    {
      "test": "密钥管理命令",
      "status": "✅ PASS",
      "passed": true,
      "details": "list命令执行成功"
    },
    {
      "test": "部署管理脚本",
      "status": "✅ PASS",
      "passed": true,
      "details": null
    },
    {
      "test": "部署脚本帮助",
      "status": "✅ PASS",
      "passed": true,
      "details": "帮助命令执行成功"
    },
    {
      "test": "部署脚本功能",
      "status": "✅ PASS",
      "passed": true,
      "details": "所有关键命令都存在"
    },
    {
      "test": "Prometheus监控目标",
      "status": "✅ PASS",
      "passed": true,
      "details": "所有关键服务都在监控中"
    },
    {
      "test": "Prometheus告警配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "配置了告警管理"
    },
    {
      "test": "生产环境配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "生产环境配置完整"
    },
    {
      "test": "生产密钥安全",
      "status": "❌ FAIL",
      "passed": false,
      "details": "关键配置缺失或使用默认值: ['POSTGRES_PASSWORD', 'REDIS_PASSWORD']"
    },
    {
      "test": "Docker生产环境配置",
      "status": "✅ PASS",
      "passed": true,
      "details": "Docker生产配置存在"
    }
  ]
}