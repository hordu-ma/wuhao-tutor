# 小程序端知识图谱功能测试清单

## 📋 测试环境

- **测试环境**: 生产环境 (https://wuhao.guomaspace.com)
- **测试工具**: 微信开发者工具 + 真机测试
- **测试账号**: 测试学生账号 (见`生产环境测试账号.md`)
- **测试日期**: 2025-11-03

---

## ✅ 功能测试清单

### 1. 错题列表页知识点筛选 (6.1)

- [ ] **科目切换时加载知识点列表**

  - 切换到"数学"科目,检查知识点筛选下拉框是否显示知识点列表
  - 知识点列表是否包含"全部知识点"选项
  - 知识点旁边是否显示错题数量

- [ ] **知识点筛选功能**

  - 选择某个知识点,错题列表是否正确筛选
  - 筛选后的错题是否都包含该知识点
  - 筛选后页面标题是否显示当前筛选条件

- [ ] **URL 参数传递**

  - 从其他页面跳转并携带`knowledge_point`参数
  - 页面是否自动应用该知识点筛选
  - 下拉框是否正确显示选中状态

- [ ] **空状态处理**
  - 选择没有错题的知识点,是否显示空状态提示
  - 空状态提示文案是否友好

---

### 2. 错题详情页知识点展示 (6.2)

- [ ] **旧数据兼容性**

  - 查看旧数据(字符串数组格式),知识点是否正常显示为标签
  - 标签样式是否正确

- [ ] **新数据详细信息展示**

  - 查看新数据(对象数组格式),是否显示详细知识点信息
  - 知识点名称、掌握度、相关度是否正确显示
  - 掌握度标签颜色是否符合规则(高:绿色,中:黄色,低:红色)

- [ ] **AI 学习建议**

  - 新数据的知识点是否显示 AI 建议
  - AI 建议内容是否有价值且易懂
  - 建议格式是否美观(列表形式)

- [ ] **点击知识点跳转**
  - 点击知识点,是否跳转到错题列表页
  - 跳转后是否自动筛选该知识点

---

### 3. 知识图谱页面 (6.3)

#### 3.1 页面加载

- [ ] 页面是否正常加载
- [ ] 默认科目(数学)数据是否正常显示
- [ ] 加载状态是否显示

#### 3.2 科目切换

- [ ] 切换科目,数据是否重新加载
- [ ] 切换动画是否流畅
- [ ] 数据是否正确对应选中科目

#### 3.3 学情概览卡片

- [ ] 错题总数是否正确
- [ ] 涉及知识点数量是否正确
- [ ] 平均掌握度是否正确计算(百分比显示)
- [ ] 卡片布局是否美观

#### 3.4 薄弱知识链列表

- [ ] 薄弱知识点是否正确识别
- [ ] 每个项目是否显示:知识点名称、错题数、掌握度
- [ ] "待加强"标签是否显示
- [ ] 常见错误类型是否显示(如有)
- [ ] 点击薄弱知识点是否跳转到错题列表

#### 3.5 知识点掌握情况列表

- [ ] 所有知识点是否列出
- [ ] 掌握度标签颜色是否正确
  - 绿色: >= 70%
  - 黄色: 40%-69%
  - 红色: < 40%
- [ ] 掌握度进度条是否显示
- [ ] 进度条颜色是否与标签一致
- [ ] 错题数量是否正确
- [ ] 最近练习时间是否显示(如有)
- [ ] 点击知识点是否跳转

#### 3.6 空状态

- [ ] 没有数据时是否显示空状态
- [ ] 空状态图标和文案是否友好

#### 3.7 底部操作

- [ ] "查看智能复习推荐"按钮是否显示
- [ ] 点击按钮是否跳转到复习推荐页面
- [ ] 科目参数是否正确传递

#### 3.8 下拉刷新

- [ ] 下拉刷新是否触发数据重新加载
- [ ] 刷新动画是否正常
- [ ] 刷新后数据是否更新

---

### 4. 复习推荐页面 (6.4)

#### 4.1 页面加载

- [ ] 页面是否正常加载
- [ ] 默认科目推荐是否显示
- [ ] 加载状态是否正常

#### 4.2 科目切换

- [ ] 切换科目,推荐列表是否更新
- [ ] 数据是否对应选中科目

#### 4.3 提示说明

- [ ] 顶部提示卡片是否显示
- [ ] 提示文案是否清晰易懂

#### 4.4 推荐项展示

- [ ] 推荐列表是否按优先级排序(序号 1,2,3...)
- [ ] 优先级徽章颜色是否正确:
  - 高优先级: 红色
  - 中优先级: 黄色
  - 低优先级: 灰色
- [ ] 知识点名称是否显示
- [ ] 优先级标签是否显示

#### 4.5 统计信息

- [ ] 掌握度是否显示(百分比)
- [ ] 错题数量是否正确
- [ ] 遗忘风险标志是否显示(风险>50%时)

#### 4.6 推荐原因

- [ ] 掌握度低(<40%)时是否显示对应原因
- [ ] 前置知识点时是否显示对应原因
- [ ] 遗忘风险高时是否显示对应原因
- [ ] 关联薄弱知识点时是否显示对应原因
- [ ] 推荐原因是否易懂

#### 4.7 交互操作

- [ ] 点击知识点是否跳转到错题列表
- [ ] 参数传递是否正确
- [ ] "查看相关错题"按钮是否可点击

#### 4.8 空状态

- [ ] 无推荐时是否显示空状态
- [ ] 空状态文案是否友好

---

## 🔌 API 集成测试

### 测试工具

使用 `scripts/test_knowledge_graph_api.py` 脚本进行 API 测试

### API 端点测试

#### 1. 获取知识点列表

```
GET /api/v1/knowledge-graph/knowledge-points?subject=数学&min_count=1
```

- [ ] 返回状态码 200
- [ ] 返回数据格式正确
- [ ] 包含知识点名称和错题数量

#### 2. 获取知识图谱快照

```
GET /api/v1/knowledge-graph/snapshot?subject=数学
```

- [ ] 返回状态码 200
- [ ] 返回完整快照数据
- [ ] 包含知识点列表、统计信息

#### 3. 获取薄弱知识链

```
GET /api/v1/knowledge-graph/weak-chains?subject=数学&limit=5
```

- [ ] 返回状态码 200
- [ ] 返回薄弱知识链列表
- [ ] 数据量不超过 limit

#### 4. 获取智能复习推荐

```
GET /api/v1/knowledge-graph/review-recommendations?subject=数学&limit=10
```

- [ ] 返回状态码 200
- [ ] 返回推荐列表
- [ ] 按优先级排序
- [ ] 数据量不超过 limit

#### 5. 按知识点筛选错题

```
GET /api/v1/mistakes?subject=数学&knowledge_point=XXX
```

- [ ] 返回状态码 200
- [ ] 返回筛选后的错题列表
- [ ] 错题包含指定知识点

---

## 🎨 UI/UX 测试

### 加载状态

- [ ] 各页面加载时是否显示 loading 组件
- [ ] loading 样式是否统一
- [ ] loading 时长是否合理(不超过 3 秒)

### 错误处理

- [ ] 网络错误时是否显示友好提示
- [ ] 是否提供"重试"按钮
- [ ] 错误提示文案是否清晰

### 空状态

- [ ] 所有空状态是否使用 empty-state 组件
- [ ] 空状态图标和文案是否一致
- [ ] 空状态是否提供引导操作

### 视觉一致性

- [ ] 颜色使用是否符合设计规范
- [ ] 间距和字号是否统一
- [ ] 卡片样式是否一致
- [ ] 标签颜色规则是否一致

### 交互体验

- [ ] 点击反馈是否明显
- [ ] 页面切换动画是否流畅
- [ ] 下拉刷新是否顺滑
- [ ] 列表滚动是否流畅

---

## 📱 真机测试

### 测试设备

- [ ] iPhone (iOS 14+)
- [ ] Android (Android 8+)

### 兼容性测试

- [ ] 页面布局是否正常
- [ ] 字体大小是否合适
- [ ] 点击区域是否足够大
- [ ] 滚动性能是否流畅

### 性能测试

- [ ] 首屏加载时间 (< 2 秒)
- [ ] 页面切换流畅度
- [ ] 内存占用是否正常
- [ ] 是否有内存泄漏

---

## 🔄 页面导航测试

### 导航路径

#### 从知识图谱页 → 错题列表

```
点击知识点 → 跳转到错题列表 → 自动筛选该知识点
```

- [ ] 跳转正常
- [ ] 参数传递正确
- [ ] 筛选自动应用

#### 从复习推荐页 → 错题列表

```
点击推荐项 → 跳转到错题列表 → 自动筛选该知识点
```

- [ ] 跳转正常
- [ ] 参数传递正确
- [ ] 筛选自动应用

#### 从知识图谱页 → 复习推荐页

```
点击"查看智能复习推荐" → 跳转到复习推荐页 → 科目保持一致
```

- [ ] 跳转正常
- [ ] 科目参数传递正确

#### 从错题详情页 → 错题列表

```
点击知识点 → 跳转到错题列表 → 自动筛选该知识点
```

- [ ] 跳转正常
- [ ] 参数传递正确

---

## 🚀 性能优化检查

### 数据加载优化

- [ ] 是否使用下拉刷新而非每次进入都重新加载
- [ ] 是否缓存已加载的数据
- [ ] API 调用是否有防抖处理

### 代码优化

- [ ] 是否有不必要的重复渲染
- [ ] 是否有内存泄漏风险
- [ ] 事件监听是否正确解绑

### 网络优化

- [ ] API 请求是否合并
- [ ] 是否有不必要的重复请求
- [ ] 请求超时设置是否合理

---

## 📝 测试结果记录

### 测试人员

- 姓名: ****\_\_\_****
- 日期: ****\_\_\_****

### 问题记录

| 序号 | 功能模块 | 问题描述 | 严重程度 | 状态 |
| ---- | -------- | -------- | -------- | ---- |
| 1    |          |          |          |      |
| 2    |          |          |          |      |
| 3    |          |          |          |      |

### 总结评价

- 功能完整度: ☐ 优秀 ☐ 良好 ☐ 一般 ☐ 需改进
- 用户体验: ☐ 优秀 ☐ 良好 ☐ 一般 ☐ 需改进
- 性能表现: ☐ 优秀 ☐ 良好 ☐ 一般 ☐ 需改进

### 建议改进

1.
2.
3.

---

## ✅ 测试完成签字

测试通过: ☐ 是 ☐ 否

签字: ****\_\_\_**** 日期: ****\_\_\_****
