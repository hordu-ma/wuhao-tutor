<!--
  学习卡片组件模板
  用于展示作业、课程、测试等学习相关内容
-->
<view
  class="study-card {{ customClass }} {{ clickable ? 'study-card--clickable' : '' }}"
  bind:tap="onCardTap"
>
  <!-- 卡片头部 -->
  <view class="study-card__header">
    <!-- 左侧图标和标题 -->
    <view class="study-card__main">
      <view class="study-card__icon-wrapper">
        <text class="icon icon-{{ icon }} icon-lg study-card__icon"></text>
      </view>

      <view class="study-card__content">
        <view class="study-card__title">{{ title }}</view>
        <view class="study-card__subtitle" wx:if="{{ subtitle }}">{{ subtitle }}</view>
      </view>
    </view>

    <!-- 右侧状态和操作 -->
    <view class="study-card__actions">
      <!-- 状态标签 -->
      <van-tag
        color="{{ statusConfig[status].color }}"
        text-color="#ffffff"
        size="medium"
        bind:tap="onStatusTap"
      >
        {{ statusConfig[status].text }}
      </van-tag>

      <!-- 更多操作按钮 -->
      <view class="study-card__more" bind:tap="onMoreTap" wx:if="{{ clickable }}">
        <text class="icon icon-more icon-sm"></text>
      </view>
    </view>
  </view>

  <!-- 卡片内容 -->
  <view class="study-card__body">
    <!-- 学科标签 -->
    <view class="study-card__subject" wx:if="{{ subject }}">
      <text
        class="icon icon-{{ subject }} icon-sm study-card__subject-icon"
        style="color: {{ subjectConfig[subject].color }}"
      ></text>
      <text class="study-card__subject-text">{{ subjectConfig[subject].text }}</text>
    </view>

    <!-- 难度标签 -->
    <view class="study-card__difficulty" wx:if="{{ difficulty }}">
      <text class="study-card__difficulty-label">难度：</text>
      <text
        class="study-card__difficulty-value"
        style="color: {{ difficultyConfig[difficulty].color }}"
      >
        {{ difficultyConfig[difficulty].text }}
      </text>
    </view>

    <!-- 进度条 -->
    <view class="study-card__progress" wx:if="{{ showProgress }}">
      <view class="study-card__progress-header">
        <text class="study-card__progress-label">完成进度</text>
        <text class="study-card__progress-percent">{{ progress }}%</text>
      </view>
      <view class="study-card__progress-bar">
        <view
          class="study-card__progress-fill"
          style="width: {{ progress }}%"
        ></view>
      </view>
    </view>

    <!-- 截止时间 -->
    <view class="study-card__deadline" wx:if="{{ deadline }}">
      <text class="icon icon-clock icon-xs study-card__deadline-icon"></text>
      <text
        class="study-card__deadline-text {{ isOverdue(deadline) ? 'study-card__deadline-text--overdue' : '' }}"
      >
        {{ formatDeadline(deadline) }}
      </text>
    </view>

    <!-- 额外信息 -->
    <view class="study-card__extra" wx:if="{{ extra }}">
      <text class="study-card__extra-text">{{ extra }}</text>
    </view>
  </view>

  <!-- 卡片底部操作区 -->
  <view class="study-card__footer" wx:if="{{ clickable }}">
    <text class="study-card__footer-text">点击查看详情</text>
    <text class="icon icon-arrow-right icon-xs study-card__footer-arrow"></text>
  </view>
</view>
