<view class="container">
  <block wx:if="{{loading}}">
    <view class="loading">加载中...</view>
  </block>
  <block wx:elif="{{plan}}">
    <view class="header">
      <view class="title">{{plan.title}}</view>
      <view class="meta">
        <text class="date">{{plan.created_at_formatted}}</text>
        <text class="count">{{plan.mistake_count}} 道错题</text>
      </view>
    </view>

    <view class="content">
      <towxml-renderer content="{{plan.content}}" />
    </view>

    <view class="footer">
      <button class="btn download" type="primary" bindtap="onDownloadTap" loading="{{downloading}}">下载 PDF</button>
      <button class="btn delete" type="warn" bindtap="onDeleteTap">删除计划</button>
    </view>
  </block>
  <block wx:else>
    <view class="error">加载失败</view>
  </block>
</view>
