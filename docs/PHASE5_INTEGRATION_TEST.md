# Phase 5.1 å‰åç«¯è”è°ƒæµ‹è¯•æ–‡æ¡£

**åˆ›å»ºæ—¶é—´**: 2025-11-05  
**æµ‹è¯•é˜¶æ®µ**: Phase 5.1 - å‰åç«¯è”è°ƒ  
**æµ‹è¯•ç›®æ ‡**: éªŒè¯é”™é¢˜æœ¬ä¼˜åŒ–åŠŸèƒ½çš„å®Œæ•´æ•°æ®æµ

---

## ğŸ“‹ æµ‹è¯•æ¦‚è§ˆ

### æµ‹è¯•èŒƒå›´
- âœ… å°ç¨‹åº â†’ åç«¯ API è¯·æ±‚/å“åº”éªŒè¯
- âœ… å›¾ç‰‡ä¸Šä¼  â†’ AI æ‰¹æ”¹ â†’ é”™é¢˜åˆ›å»º â†’ å‰ç«¯å±•ç¤ºå®Œæ•´æµç¨‹
- âœ… æ‰¹æ”¹ç»“æœå¡ç‰‡ç»„ä»¶æ¸²æŸ“å’Œäº¤äº’
- âœ… é”™é¢˜æœ¬å…³è”åŠŸèƒ½éªŒè¯

### ç¯å¢ƒä¿¡æ¯
- **åç«¯ç¯å¢ƒ**: ç”Ÿäº§ç¯å¢ƒ (https://www.horsduroot.com)
- **å‰ç«¯ç¯å¢ƒ**: å¾®ä¿¡å¼€å‘è€…å·¥å…·
- **æµ‹è¯•è´¦å·**: å·²æ³¨å†Œå­¦ç”Ÿè´¦å·

---

## ğŸ¯ 5.1.1 API å¯¹æ¥éªŒè¯

### æµ‹è¯•ç›®æ ‡
éªŒè¯å°ç¨‹åºä¸åç«¯ API çš„é€šä¿¡ï¼Œç¡®ä¿è¯·æ±‚/å“åº”æ ¼å¼æ­£ç¡®ã€‚

### å‰ç½®æ¡ä»¶
1. åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ (ç”Ÿäº§ç¯å¢ƒ)
2. å°ç¨‹åºå·²é…ç½®æ­£ç¡®çš„ API åœ°å€
3. ç”¨æˆ·å·²ç™»å½•å¹¶è·å–æœ‰æ•ˆ Token

### æµ‹è¯•æ­¥éª¤

#### Step 1: éªŒè¯ API é…ç½®
**æ–‡ä»¶**: `miniprogram/config/index.js`

```javascript
// ç¡®è®¤é…ç½®
environment: 'production',
api: {
  baseUrl: 'https://www.horsduroot.com',
  timeout: 120000,
}
```

**éªŒè¯å‘½ä»¤**:
```bash
# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ§åˆ¶å°æ‰§è¡Œ
const config = require('./config/index.js');
console.log('API Base URL:', config.api.baseUrl);
console.log('Environment:', config.environment);
```

**é¢„æœŸç»“æœ**:
```
API Base URL: https://www.horsduroot.com
Environment: production
```

---

#### Step 2: æµ‹è¯•å›¾ç‰‡ä¸Šä¼  API

**è§¦å‘æ–¹å¼**: 
1. æ‰“å¼€å°ç¨‹åº "ä½œä¸šé—®ç­”" é¡µé¢
2. ç‚¹å‡»ç›¸æœºå›¾æ ‡
3. é€‰æ‹©ä½œä¸šå›¾ç‰‡ä¸Šä¼ 

**å…³é”®ä»£ç ä½ç½®**: `miniprogram/pages/learning/index/index.js`

**ç›‘æ§æ—¥å¿—**:
```javascript
// åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…· Network é¢æ¿æŸ¥çœ‹
Request URL: https://www.horsduroot.com/api/v1/learning/ask-stream
Method: POST
Content-Type: application/json

// è¯·æ±‚ä½“ç¤ºä¾‹
{
  "content": "è¯·å¸®æˆ‘æ‰¹æ”¹è¿™ä»½ä½œä¸š",
  "question_type": "homework_review",
  "subject": "math",
  "image_urls": ["https://..."],
  "session_id": "xxx-xxx-xxx",
  "use_context": true
}
```

**éªŒè¯ç‚¹**:
- [ ] è¯·æ±‚å¤´åŒ…å« `Authorization: Bearer <token>`
- [ ] `image_urls` æ•°ç»„éç©º
- [ ] `question_type` ä¸º `homework_review`
- [ ] å“åº”çŠ¶æ€ç  200

---

#### Step 3: éªŒè¯ AI æ‰¹æ”¹å“åº”

**åç«¯ API**: `/api/v1/learning/ask-stream`  
**å“åº”æ ¼å¼**: Server-Sent Events (SSE)

**é¢„æœŸ SSE äº‹ä»¶æµ**:

```
event: message
data: {"type": "content", "content": "æ­£åœ¨åˆ†æä½œä¸šå›¾ç‰‡..."}

event: message
data: {"type": "content", "content": "é¢˜ç›®1: ..."}

event: done
data: {
  "question": {...},
  "answer": {...},
  "session": {...},
  "correction_result": [
    {
      "question_number": 1,
      "error_type": "calculation_error",
      "is_unanswered": false,
      "student_answer": "42",
      "correct_answer": "48",
      "explanation": "è®¡ç®—é”™è¯¯ï¼Œåº”è¯¥æ˜¯ 8Ã—6=48",
      "knowledge_points": ["ä¹˜æ³•è¿ç®—"]
    },
    {
      "question_number": 2,
      "error_type": null,
      "is_unanswered": false,
      "student_answer": "25",
      "correct_answer": "25",
      "explanation": "æ­£ç¡®",
      "knowledge_points": ["åŠ æ³•è¿ç®—"]
    }
  ],
  "mistakes_created": 1
}
```

**éªŒè¯ç‚¹**:
- [ ] `event: message` æµå¼è¾“å‡ºå†…å®¹
- [ ] `event: done` åŒ…å«å®Œæ•´æ‰¹æ”¹ç»“æœ
- [ ] `correction_result` æ˜¯æ•°ç»„
- [ ] `mistakes_created` æ˜¯æ•°å­—
- [ ] é”™é¢˜çš„ `error_type` æˆ– `is_unanswered` ä¸º true

---

## ğŸ”„ 5.1.2 æ•°æ®æµå®Œæ•´æ€§æµ‹è¯•

### æµ‹è¯•ç›®æ ‡
éªŒè¯æ•°æ®ä»å‰ç«¯ â†’ åç«¯ â†’ æ•°æ®åº“ â†’ å‰ç«¯çš„å®Œæ•´æµç¨‹ï¼Œç¡®ä¿æ— æ•°æ®ä¸¢å¤±ã€‚

### æ•°æ®æµè·¯å¾„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å°ç¨‹åº     â”‚â”€â”€â”€â”€â”€â–¶â”‚  åç«¯ API   â”‚â”€â”€â”€â”€â”€â–¶â”‚  PostgreSQL â”‚
â”‚ (Learning)  â”‚      â”‚ (Learning)  â”‚      â”‚  (Mistakes) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                     â”‚                     â”‚
       â”‚                     â”‚                     â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              æ‰¹æ”¹ç»“æœ + é”™é¢˜ ID
```

### æµ‹è¯•åœºæ™¯ 1: æ­£å¸¸æ‰¹æ”¹æµç¨‹

#### æ“ä½œæ­¥éª¤
1. ä¸Šä¼ åŒ…å« 5 é“é¢˜çš„ä½œä¸šå›¾ç‰‡
2. ç­‰å¾… AI æ‰¹æ”¹å®Œæˆ
3. æŸ¥çœ‹æ‰¹æ”¹ç»“æœå¡ç‰‡
4. ç‚¹å‡»"æŸ¥çœ‹é”™é¢˜æœ¬"

#### å‰ç«¯éªŒè¯ (å°ç¨‹åºæ§åˆ¶å°)

```javascript
// ç›‘å¬ sendMessage æ–¹æ³•ä¸­çš„æ—¥å¿—
console.log('ğŸ“‹ æ£€æµ‹åˆ°æ‰¹æ”¹ç»“æœ:', response.correction_result);
console.log('ğŸ“‹ æ‰¹æ”¹ç»Ÿè®¡:', {
  totalQuestions: response.correction_result.length,
  mistakesCreated: response.mistakes_created || 0,
});
```

**é¢„æœŸè¾“å‡º**:
```
ğŸ“‹ æ£€æµ‹åˆ°æ‰¹æ”¹ç»“æœ: [{...}, {...}, {...}, {...}, {...}]
ğŸ“‹ æ‰¹æ”¹ç»Ÿè®¡: { totalQuestions: 5, mistakesCreated: 2 }
```

#### åç«¯éªŒè¯ (æœåŠ¡å™¨æ—¥å¿—)

```bash
# SSH åˆ°ç”Ÿäº§æœåŠ¡å™¨
ssh root@121.199.173.244

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
journalctl -u wuhao-tutor.service -f | grep "æ‰¹æ”¹"
```

**é¢„æœŸæ—¥å¿—**:
```
ğŸ“ æ£€æµ‹åˆ°ä½œä¸šæ‰¹æ”¹åœºæ™¯ï¼Œå¯åŠ¨ä¸“ç”¨é€»è¾‘
âœ… [æ‰¹æ”¹å®Œæˆ] ä½œä¸šæ‰¹æ”¹æˆåŠŸ: total_questions=5, errors=2, ...
ğŸ“ [é”™é¢˜åˆ›å»º] å¼€å§‹å¤„ç†æ‰¹æ”¹ç»“æœ: total_corrections=5, error_count=2
  [1/5] ğŸ”´ å¤„ç†é”™é¢˜: Q1, type=calculation, error_type=calculation_error
  [2/5] è·³è¿‡æ­£ç¡®é¢˜ç›®: Q2
  [3/5] ğŸ”´ å¤„ç†é”™é¢˜: Q3, type=concept, error_type=concept_misunderstanding
  [4/5] è·³è¿‡æ­£ç¡®é¢˜ç›®: Q4
  [5/5] è·³è¿‡æ­£ç¡®é¢˜ç›®: Q5
âœ… [é”™é¢˜åˆ›å»º] æˆåŠŸåˆ›å»º 2 ä¸ªé”™é¢˜
```

#### æ•°æ®åº“éªŒè¯

```bash
# è¿æ¥åˆ° PostgreSQL
psql -U wuhao_user -d wuhao_db

# æŸ¥è¯¢æœ€æ–°åˆ›å»ºçš„é”™é¢˜
SELECT 
  id, 
  question_number, 
  error_type, 
  is_unanswered,
  created_at
FROM mistakes
WHERE user_id = '<æµ‹è¯•ç”¨æˆ·ID>'
ORDER BY created_at DESC
LIMIT 10;
```

**é¢„æœŸç»“æœ**:
```
 id                                   | question_number | error_type              | is_unanswered | created_at
--------------------------------------+-----------------+-------------------------+---------------+---------------------------
 uuid-1                               | 1               | calculation_error       | f             | 2025-11-05 10:30:15
 uuid-2                               | 3               | concept_misunderstanding| f             | 2025-11-05 10:30:16
```

**éªŒè¯ç‚¹**:
- [ ] æ•°æ®åº“ä¸­åˆ›å»ºäº† 2 æ¡é”™é¢˜è®°å½•
- [ ] `question_number` ä¸æ‰¹æ”¹ç»“æœä¸€è‡´
- [ ] `error_type` æ­£ç¡®
- [ ] `created_at` æ—¶é—´æˆ³åˆç†

---

### æµ‹è¯•åœºæ™¯ 2: å…¨å¯¹åœºæ™¯

#### æ“ä½œæ­¥éª¤
1. ä¸Šä¼ å…¨éƒ¨æ­£ç¡®çš„ä½œä¸šå›¾ç‰‡
2. ç­‰å¾…æ‰¹æ”¹å®Œæˆ
3. æŸ¥çœ‹æ‰¹æ”¹ç»“æœå¡ç‰‡

#### å‰ç«¯é¢„æœŸ
- æ˜¾ç¤º"æ­å–œä½ å…¨å¯¹äº†ï¼"æ¶ˆæ¯
- æ˜¾ç¤ºæ­£ç¡®é¢˜æ•°ç»Ÿè®¡
- æ˜¾ç¤º"ç»§ç»­ç»ƒä¹ "æŒ‰é’®
- ä¸æ˜¾ç¤ºé”™é¢˜åˆ—è¡¨

#### åç«¯é¢„æœŸ
```
âœ… [æ‰¹æ”¹å®Œæˆ] total_questions=5, errors=0, unanswered=0
ğŸ“ [é”™é¢˜åˆ›å»º] å¼€å§‹å¤„ç†æ‰¹æ”¹ç»“æœ: error_count=0
âœ… [é”™é¢˜åˆ›å»º] æˆåŠŸåˆ›å»º 0 ä¸ªé”™é¢˜
```

---

### æµ‹è¯•åœºæ™¯ 3: éƒ¨åˆ†æœªä½œç­”

#### æ“ä½œæ­¥éª¤
1. ä¸Šä¼ åŒ…å«æœªä½œç­”é¢˜ç›®çš„ä½œä¸šå›¾ç‰‡
2. ç­‰å¾…æ‰¹æ”¹å®Œæˆ
3. éªŒè¯æœªä½œç­”é¢˜ç›®è¢«æ ‡è®°ä¸ºé”™é¢˜

#### éªŒè¯ç‚¹
- [ ] `is_unanswered: true` çš„é¢˜ç›®è¢«åˆ›å»ºä¸ºé”™é¢˜
- [ ] `error_type` ä¸º `null` æˆ–ç©º
- [ ] å‰ç«¯æ˜¾ç¤º"æœªä½œç­”"æ ‡ç­¾

---

## ğŸ”— 5.1.3 é”™é¢˜æœ¬å…³è”éªŒè¯

### æµ‹è¯•ç›®æ ‡
éªŒè¯æ‰¹æ”¹ç»“æœä¸é”™é¢˜æœ¬çš„å…³è”åŠŸèƒ½ï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤ŸæŸ¥çœ‹æ–°åˆ›å»ºçš„é”™é¢˜ã€‚

### æµ‹è¯•æ­¥éª¤

#### Step 1: ç‚¹å‡»"æŸ¥çœ‹é”™é¢˜æœ¬"

**è§¦å‘ä½ç½®**: `miniprogram/components/correction-card/index.js`

```javascript
goToMistakeBook() {
  console.log('[correction-card] è·³è½¬åˆ°é”™é¢˜æœ¬');
  wx.navigateTo({
    url: '/pages/mistakes/index/index',
  });
}
```

**éªŒè¯ç‚¹**:
- [ ] ç‚¹å‡»æŒ‰é’®åæˆåŠŸè·³è½¬
- [ ] ç›®æ ‡é¡µé¢è·¯å¾„æ­£ç¡®: `/pages/mistakes/index/index`

---

#### Step 2: éªŒè¯é”™é¢˜æœ¬æ˜¾ç¤º

**é¡µé¢**: `pages/mistakes/index/index`

**æ•°æ®åŠ è½½**:
```javascript
// æŸ¥çœ‹ç½‘ç»œè¯·æ±‚
Request URL: https://www.horsduroot.com/api/v1/mistakes?page=1&page_size=20
Method: GET

// å“åº”ç¤ºä¾‹
{
  "items": [
    {
      "id": "uuid-1",
      "question_number": 1,
      "original_question": "8Ã—6=?",
      "student_answer": "42",
      "correct_answer": "48",
      "error_type": "calculation_error",
      "created_at": "2025-11-05T10:30:15Z"
    }
  ],
  "total": 2,
  "page": 1,
  "page_size": 20
}
```

**éªŒè¯ç‚¹**:
- [ ] é”™é¢˜æœ¬åˆ—è¡¨æ˜¾ç¤ºæ–°åˆ›å»ºçš„é”™é¢˜
- [ ] é”™é¢˜ä¿¡æ¯å®Œæ•´ï¼ˆé¢˜å·ã€ç­”æ¡ˆã€è§£æç­‰ï¼‰
- [ ] `created_at` æ˜¯åˆšæ‰æ‰¹æ”¹çš„æ—¶é—´
- [ ] é”™é¢˜æ•°é‡ä¸ `mistakes_created` ä¸€è‡´

---

#### Step 3: éªŒè¯é”™é¢˜è¯¦æƒ…

**æ“ä½œ**: ç‚¹å‡»é”™é¢˜å¡ç‰‡

**è·³è½¬**: `/pages/mistakes/detail/index?id=<mistake_id>`

**éªŒè¯ç‚¹**:
- [ ] æ˜¾ç¤ºå®Œæ•´é¢˜ç›®ä¿¡æ¯
- [ ] æ˜¾ç¤ºå­¦ç”Ÿç­”æ¡ˆå’Œæ­£ç¡®ç­”æ¡ˆ
- [ ] æ˜¾ç¤ºé”™è¯¯åŸå› å’Œè§£æ
- [ ] æ˜¾ç¤ºçŸ¥è¯†ç‚¹æ ‡ç­¾
- [ ] æ˜¾ç¤ºåŸå§‹ä½œä¸šå›¾ç‰‡

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹æ¸…å•

### ç”¨ä¾‹ 1: åŸºæœ¬æ‰¹æ”¹æµç¨‹
| é¡¹ç›® | å†…å®¹ |
|------|------|
| å‰ç½®æ¡ä»¶ | ç”¨æˆ·å·²ç™»å½•ï¼Œæœ‰æœ‰æ•ˆ Token |
| æµ‹è¯•æ•°æ® | 5 é“é¢˜ä½œä¸šå›¾ç‰‡ï¼Œ2 é¢˜é”™è¯¯ |
| æ“ä½œæ­¥éª¤ | ä¸Šä¼ å›¾ç‰‡ â†’ ç­‰å¾…æ‰¹æ”¹ â†’ æŸ¥çœ‹ç»“æœ |
| é¢„æœŸç»“æœ | æ˜¾ç¤ºæ‰¹æ”¹å¡ç‰‡ï¼Œ2 ä¸ªé”™é¢˜è¢«åˆ›å»º |
| éªŒè¯æ–¹å¼ | å‰ç«¯æ—¥å¿— + æ•°æ®åº“æŸ¥è¯¢ |

### ç”¨ä¾‹ 2: å›¾ç‰‡ä¸Šä¼ å¤±è´¥
| é¡¹ç›® | å†…å®¹ |
|------|------|
| å‰ç½®æ¡ä»¶ | ç½‘ç»œä¸ç¨³å®šæˆ–æ–‡ä»¶è¿‡å¤§ |
| æµ‹è¯•æ•°æ® | è¶…å¤§å›¾ç‰‡ï¼ˆ>10MBï¼‰ |
| æ“ä½œæ­¥éª¤ | å°è¯•ä¸Šä¼ å›¾ç‰‡ |
| é¢„æœŸç»“æœ | æ˜¾ç¤ºé”™è¯¯æç¤º |
| éªŒè¯æ–¹å¼ | å‰ç«¯é”™è¯¯æç¤º |

### ç”¨ä¾‹ 3: AI æ‰¹æ”¹è¶…æ—¶
| é¡¹ç›® | å†…å®¹ |
|------|------|
| å‰ç½®æ¡ä»¶ | AI æœåŠ¡å“åº”æ…¢ |
| æµ‹è¯•æ•°æ® | å¤æ‚ä½œä¸šå›¾ç‰‡ |
| æ“ä½œæ­¥éª¤ | ä¸Šä¼ å›¾ç‰‡ â†’ ç­‰å¾… > 120s |
| é¢„æœŸç»“æœ | æ˜¾ç¤ºè¶…æ—¶æç¤ºï¼Œå¯é‡è¯• |
| éªŒè¯æ–¹å¼ | è¶…æ—¶å¤„ç†é€»è¾‘ |

### ç”¨ä¾‹ 4: Token è¿‡æœŸ
| é¡¹ç›® | å†…å®¹ |
|------|------|
| å‰ç½®æ¡ä»¶ | Token å·²è¿‡æœŸ |
| æµ‹è¯•æ•°æ® | ä»»æ„ä½œä¸šå›¾ç‰‡ |
| æ“ä½œæ­¥éª¤ | ä¸Šä¼ å›¾ç‰‡ |
| é¢„æœŸç»“æœ | è‡ªåŠ¨åˆ·æ–° Token æˆ–è·³è½¬ç™»å½• |
| éªŒè¯æ–¹å¼ | è®¤è¯æµç¨‹ |

### ç”¨ä¾‹ 5: å…¨å¯¹åœºæ™¯
| é¡¹ç›® | å†…å®¹ |
|------|------|
| å‰ç½®æ¡ä»¶ | ç”¨æˆ·å·²ç™»å½• |
| æµ‹è¯•æ•°æ® | å…¨éƒ¨æ­£ç¡®çš„ä½œä¸š |
| æ“ä½œæ­¥éª¤ | ä¸Šä¼ å›¾ç‰‡ â†’ æŸ¥çœ‹ç»“æœ |
| é¢„æœŸç»“æœ | æ˜¾ç¤º"å…¨å¯¹"æ¶ˆæ¯ï¼Œ0 ä¸ªé”™é¢˜ |
| éªŒè¯æ–¹å¼ | å‰ç«¯å±•ç¤º + æ•°æ®åº“æŸ¥è¯¢ |

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å“åº”æ—¶é—´
- **å›¾ç‰‡ä¸Šä¼ **: < 5s
- **AI æ‰¹æ”¹**: < 30s (5 é“é¢˜)
- **é”™é¢˜åˆ›å»º**: < 2s
- **æ€»æµç¨‹**: < 40s

### ç½‘ç»œç›‘æ§

```javascript
// åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…· Network é¢æ¿æŸ¥çœ‹
Request Timeline:
â”œâ”€ Upload Image:    2.5s
â”œâ”€ AI Processing:   25.3s
â”œâ”€ Create Mistakes: 1.2s
â””â”€ Total:          29.0s
```

### é”™è¯¯ç‡ç›®æ ‡
- API è°ƒç”¨æˆåŠŸç‡: > 99%
- å›¾ç‰‡ä¸Šä¼ æˆåŠŸç‡: > 95%
- AI æ‰¹æ”¹æˆåŠŸç‡: > 95%

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: æ‰¹æ”¹ç»“æœä¸æ˜¾ç¤º

**ç—‡çŠ¶**: AI å›å¤å®Œæˆï¼Œä½†æ²¡æœ‰æ˜¾ç¤ºæ‰¹æ”¹å¡ç‰‡

**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥å‰ç«¯æ—¥å¿—: `console.log('ğŸ“‹ æ£€æµ‹åˆ°æ‰¹æ”¹ç»“æœ:', response.correction_result);`
2. éªŒè¯ `response.correction_result` æ˜¯å¦å­˜åœ¨ä¸”ä¸ºæ•°ç»„
3. æ£€æŸ¥ç»„ä»¶æ˜¯å¦æ­£ç¡®æ³¨å†Œ: `miniprogram/pages/learning/index/index.json`
4. éªŒè¯æ¡ä»¶æ¸²æŸ“: `wx:if="{{message.type === 'correction_card'}}"`

**å¯èƒ½åŸå› **:
- åç«¯æœªè¿”å› `correction_result` å­—æ®µ
- å‰ç«¯è¿‡æ»¤é€»è¾‘é”™è¯¯
- ç»„ä»¶æœªæ­£ç¡®åŠ è½½

---

### é—®é¢˜ 2: é”™é¢˜æœªåˆ›å»º

**ç—‡çŠ¶**: æ‰¹æ”¹å®Œæˆï¼Œä½†æ•°æ®åº“ä¸­æ²¡æœ‰é”™é¢˜è®°å½•

**æ’æŸ¥æ­¥éª¤**:
1. æŸ¥çœ‹åç«¯æ—¥å¿—: `journalctl -u wuhao-tutor.service | grep "é”™é¢˜åˆ›å»º"`
2. æ£€æŸ¥ `correction_result` ä¸­æ˜¯å¦æœ‰é”™é¢˜ (`error_type` æˆ– `is_unanswered`)
3. éªŒè¯æ•°æ®åº“è¿æ¥
4. æ£€æŸ¥äº‹åŠ¡æäº¤

**å¯èƒ½åŸå› **:
- æ‰€æœ‰é¢˜ç›®éƒ½æ­£ç¡®ï¼ˆé¢„æœŸè¡Œä¸ºï¼‰
- æ‰¹æ”¹é€»è¾‘æœªè¯†åˆ«é”™é¢˜
- æ•°æ®åº“å†™å…¥å¤±è´¥

---

### é—®é¢˜ 3: è·³è½¬é”™é¢˜æœ¬å¤±è´¥

**ç—‡çŠ¶**: ç‚¹å‡»"æŸ¥çœ‹é”™é¢˜æœ¬"æ— ååº”

**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥ç»„ä»¶æ–¹æ³•: `goToMistakeBook()`
2. éªŒè¯é¡µé¢è·¯å¾„: `/pages/mistakes/index/index`
3. æ£€æŸ¥ `app.json` ä¸­é¡µé¢æ³¨å†Œ
4. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯

**å¯èƒ½åŸå› **:
- é¡µé¢è·¯å¾„é”™è¯¯
- é¡µé¢æœªåœ¨ `app.json` ä¸­æ³¨å†Œ
- äº‹ä»¶ç»‘å®šé”™è¯¯

---

## âœ… æµ‹è¯•å®Œæˆæ£€æŸ¥æ¸…å•

### API å¯¹æ¥
- [ ] API åœ°å€é…ç½®æ­£ç¡®
- [ ] Token è®¤è¯æ­£å¸¸
- [ ] è¯·æ±‚å¤´å®Œæ•´
- [ ] å“åº”æ ¼å¼æ­£ç¡®
- [ ] SSE æµå¼å“åº”æ­£å¸¸

### æ•°æ®æµ
- [ ] å›¾ç‰‡ä¸Šä¼ æˆåŠŸ
- [ ] AI æ‰¹æ”¹è¿”å›ç»“æœ
- [ ] é”™é¢˜åˆ›å»ºåˆ°æ•°æ®åº“
- [ ] å‰ç«¯æ¥æ”¶å¹¶è§£æå“åº”
- [ ] æ‰¹æ”¹å¡ç‰‡æ­£ç¡®æ¸²æŸ“

### é”™é¢˜æœ¬å…³è”
- [ ] "æŸ¥çœ‹é”™é¢˜æœ¬"æŒ‰é’®å¯ç‚¹å‡»
- [ ] è·³è½¬åˆ°é”™é¢˜æœ¬é¡µé¢
- [ ] é”™é¢˜æœ¬æ˜¾ç¤ºæ–°é”™é¢˜
- [ ] é”™é¢˜è¯¦æƒ…å®Œæ•´
- [ ] çŸ¥è¯†ç‚¹å…³è”æ­£ç¡®

### è¾¹ç•Œæƒ…å†µ
- [ ] å…¨å¯¹åœºæ™¯æ­£ç¡®å¤„ç†
- [ ] æœªä½œç­”é¢˜ç›®æ ‡è®°æ­£ç¡®
- [ ] ç½‘ç»œé”™è¯¯æœ‰æç¤º
- [ ] è¶…æ—¶åœºæ™¯æœ‰é‡è¯•
- [ ] Token è¿‡æœŸè‡ªåŠ¨åˆ·æ–°

---

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
## Phase 5.1 å‰åç«¯è”è°ƒæµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: 2025-11-05  
**æµ‹è¯•äººå‘˜**: [å§“å]  
**æµ‹è¯•ç¯å¢ƒ**: ç”Ÿäº§ç¯å¢ƒ

### æµ‹è¯•æ¦‚å†µ
- æµ‹è¯•ç”¨ä¾‹æ€»æ•°: 5
- é€šè¿‡ç”¨ä¾‹: X
- å¤±è´¥ç”¨ä¾‹: Y
- é˜»å¡é—®é¢˜: Z

### è¯¦ç»†ç»“æœ

#### ç”¨ä¾‹ 1: åŸºæœ¬æ‰¹æ”¹æµç¨‹
- çŠ¶æ€: âœ… é€šè¿‡ / âŒ å¤±è´¥
- å¤‡æ³¨: [è¯¦ç»†è¯´æ˜]

#### ç”¨ä¾‹ 2: å›¾ç‰‡ä¸Šä¼ å¤±è´¥
- çŠ¶æ€: âœ… é€šè¿‡ / âŒ å¤±è´¥
- å¤‡æ³¨: [è¯¦ç»†è¯´æ˜]

### å‘ç°çš„é—®é¢˜
1. [é—®é¢˜æè¿°]
   - ä¸¥é‡çº§åˆ«: é«˜/ä¸­/ä½
   - å¤ç°æ­¥éª¤: [...]
   - é¢„æœŸç»“æœ: [...]
   - å®é™…ç»“æœ: [...]

### æ€§èƒ½æ•°æ®
- å¹³å‡å“åº”æ—¶é—´: Xs
- æˆåŠŸç‡: X%

### ç»“è®º
- [ ] å¯ä»¥è¿›å…¥ä¸‹ä¸€é˜¶æ®µ
- [ ] éœ€è¦ä¿®å¤é—®é¢˜åé‡æµ‹
```

---

## ğŸš€ ä¸‹ä¸€æ­¥

Phase 5.1 å®Œæˆåï¼Œç»§ç»­è¿›è¡Œ:
- **Phase 5.2**: åœºæ™¯æµ‹è¯•ï¼ˆå¤šå­¦ç§‘ã€å¤šé¢˜å‹ã€è¾¹ç•Œæ¡ä»¶ï¼‰
- **Phase 5.3**: æ€§èƒ½ä¸ç¨³å®šæ€§æµ‹è¯•
- **Phase 5.4**: UI/UX æµ‹è¯•

---

**æ–‡æ¡£ç»´æŠ¤**: æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆè¯·åŠæ—¶æ›´æ–°åˆ°æ­¤æ–‡æ¡£ã€‚