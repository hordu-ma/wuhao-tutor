{
  "summary": {
    "models_count": 19,
    "repositories_count": 1,
    "services_count": 9,
    "api_endpoints_count": 0,
    "migrations_count": 2,
    "total_issues": 19
  },
  "models": {
    "User": {
      "file": "user.py",
      "table_name": "users",
      "relationships": []
    },
    "UserSession": {
      "file": "user.py",
      "table_name": "user_sessions",
      "relationships": []
    },
    "Homework": {
      "file": "homework.py",
      "table_name": "homework",
      "relationships": []
    },
    "HomeworkSubmission": {
      "file": "homework.py",
      "table_name": "homework_submissions",
      "relationships": []
    },
    "HomeworkImage": {
      "file": "homework.py",
      "table_name": "homework_images",
      "relationships": []
    },
    "HomeworkReview": {
      "file": "homework.py",
      "table_name": "homework_reviews",
      "relationships": []
    },
    "ChatSession": {
      "file": "learning.py",
      "table_name": "chat_sessions",
      "relationships": []
    },
    "Question": {
      "file": "learning.py",
      "table_name": "questions",
      "relationships": []
    },
    "Answer": {
      "file": "learning.py",
      "table_name": "answers",
      "relationships": []
    },
    "LearningAnalytics": {
      "file": "learning.py",
      "table_name": "learning_analytics",
      "relationships": []
    },
    "KnowledgeNode": {
      "file": "knowledge.py",
      "table_name": "knowledge_nodes",
      "relationships": []
    },
    "KnowledgeRelation": {
      "file": "knowledge.py",
      "table_name": "knowledge_relations",
      "relationships": []
    },
    "LearningPath": {
      "file": "knowledge.py",
      "table_name": "learning_paths",
      "relationships": []
    },
    "UserLearningPath": {
      "file": "knowledge.py",
      "table_name": "user_learning_paths",
      "relationships": []
    },
    "KnowledgeGraph": {
      "file": "knowledge.py",
      "table_name": "knowledge_graphs",
      "relationships": []
    },
    "MistakeRecord": {
      "file": "study.py",
      "table_name": "mistake_records",
      "relationships": []
    },
    "KnowledgeMastery": {
      "file": "study.py",
      "table_name": "knowledge_mastery",
      "relationships": []
    },
    "ReviewSchedule": {
      "file": "study.py",
      "table_name": "review_schedule",
      "relationships": []
    },
    "StudySession": {
      "file": "study.py",
      "table_name": "study_sessions",
      "relationships": []
    }
  },
  "repositories": {
    "LearningRepository": {
      "file": "learning_repository.py",
      "model": "未知",
      "methods": [
        "get_user_active_session",
        "get_user_sessions_with_stats",
        "get_session_with_qa_history",
        "get_recent_questions_by_topic",
        "get_questions_with_low_ratings",
        "search_questions_by_content",
        "get_user_learning_stats",
        "get_daily_activity_pattern",
        "get_knowledge_mastery_analysis",
        "invalidate_user_cache",
        "bulk_update_session_stats"
      ]
    }
  },
  "services": {
    "LearningService": {
      "file": "learning_service.py",
      "repositories": [],
      "methods": [
        "ask_question",
        "_get_or_create_session",
        "_generate_session_title",
        "_save_question",
        "_build_ai_context"
      ]
    },
    "AuthService": {
      "file": "auth_service.py",
      "repositories": [],
      "methods": [
        "authenticate_with_password",
        "authenticate_with_wechat",
        "refresh_access_token",
        "logout_user",
        "verify_user_session",
        "check_user_permission",
        "wrapper"
      ]
    },
    "FileService": {
      "file": "file_service.py",
      "repositories": [],
      "methods": [
        "upload_file",
        "get_files",
        "get_file_info",
        "get_file_path",
        "record_download",
        "record_preview",
        "update_file_info",
        "delete_file",
        "get_file_stats"
      ]
    },
    "BailianService": {
      "file": "bailian_service.py",
      "repositories": [],
      "methods": [
        "chat_completion",
        "_call_bailian_api_with_retry",
        "_call_bailian_api",
        "__aenter__",
        "__aexit__",
        "close",
        "close_bailian_service"
      ]
    },
    "HomeworkService": {
      "file": "homework_service.py",
      "repositories": [],
      "methods": [
        "create_homework",
        "get_homework",
        "list_homeworks",
        "create_submission",
        "upload_homework_images",
        "_process_images_ocr",
        "_process_single_image_ocr",
        "_assess_image_quality",
        "_mark_ocr_failed",
        "_trigger_ai_review",
        "start_ai_review"
      ]
    },
    "WeChatService": {
      "file": "wechat_service.py",
      "repositories": [],
      "methods": [
        "code2session",
        "decrypt_user_info",
        "get_access_token"
      ]
    },
    "UserService": {
      "file": "user_service.py",
      "repositories": [],
      "methods": [
        "create_user"
      ]
    },
    "HomeworkAPIService": {
      "file": "homework_api_service.py",
      "repositories": [],
      "methods": [
        "create_homework",
        "get_homework",
        "update_homework",
        "list_homeworks",
        "create_submission",
        "get_submission",
        "get_submission_with_details",
        "upload_homework_images",
        "start_ai_review",
        "list_submissions",
        "get_homework_statistics",
        "health_check",
        "check_ai_service_status"
      ]
    },
    "AnalyticsService": {
      "file": "analytics_service.py",
      "repositories": [],
      "methods": [
        "get_learning_stats",
        "get_user_stats",
        "get_knowledge_map",
        "_count_study_days",
        "_count_questions",
        "_count_homework",
        "_calculate_avg_score",
        "_analyze_knowledge_points",
        "_get_study_trend"
      ]
    }
  },
  "api_endpoints": {},
  "issues": {
    "ai_service": [
      "缺少配置项: DASHSCOPE_API_KEY",
      "缺少配置项: BAILIAN_APP_ID",
      "缺少配置项: HOMEWORK_CORRECTION_APP_ID",
      "缺少配置项: LEARNING_ASSISTANT_APP_ID",
      "缺少配置项: KNOWLEDGE_QA_APP_ID"
    ],
    "configuration": [
      "缺少配置项: DATABASE_URL",
      "缺少配置项: REDIS_URL",
      "缺少配置项: DASHSCOPE_API_KEY"
    ],
    "model_repository": [
      "以下模型缺少Repository: User, UserSession, Homework, HomeworkSubmission, HomeworkImage, HomeworkReview, ChatSession, Question, Answer, LearningAnalytics, KnowledgeNode, KnowledgeRelation, LearningPath, UserLearningPath, KnowledgeGraph, MistakeRecord, KnowledgeMastery, ReviewSchedule, StudySession",
      "LearningRepository 引用的模型(未知)不匹配"
    ],
    "service_repository": [
      "LearningService 未使用任何Repository",
      "AuthService 未使用任何Repository",
      "FileService 未使用任何Repository",
      "BailianService 未使用任何Repository",
      "HomeworkService 未使用任何Repository",
      "WeChatService 未使用任何Repository",
      "UserService 未使用任何Repository",
      "HomeworkAPIService 未使用任何Repository",
      "AnalyticsService 未使用任何Repository"
    ]
  }
}