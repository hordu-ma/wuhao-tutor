<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>äº”å¥½ä¼´å­¦ - æµè§ˆå™¨å…¼å®¹æ€§æ£€æµ‹</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #333;
        margin-bottom: 10px;
        font-size: 28px;
      }

      .subtitle {
        color: #666;
        margin-bottom: 30px;
        font-size: 14px;
      }

      .summary {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
      }

      .summary-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        font-size: 14px;
      }

      .summary-item:last-child {
        margin-bottom: 0;
      }

      .summary-label {
        color: #666;
        font-weight: 500;
      }

      .summary-value {
        color: #333;
        font-weight: 600;
      }

      .section {
        margin-bottom: 30px;
      }

      .section-title {
        color: #333;
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #e9ecef;
      }

      .check-item {
        margin: 10px 0;
        padding: 12px 15px;
        background: #f8f9fa;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        transition: all 0.2s;
      }

      .check-item:hover {
        transform: translateX(5px);
      }

      .check-item.pass {
        background: #d4edda;
        border-left: 4px solid #28a745;
      }

      .check-item.fail {
        background: #f8d7da;
        border-left: 4px solid #dc3545;
      }

      .check-name {
        flex: 1;
        color: #333;
        font-weight: 500;
      }

      .check-status {
        font-weight: 600;
        padding: 4px 12px;
        border-radius: 4px;
        font-size: 13px;
      }

      .check-item.pass .check-status {
        color: #155724;
        background: #c3e6cb;
      }

      .check-item.fail .check-status {
        color: #721c24;
        background: #f5c6cb;
      }

      .info {
        background: #e7f3ff;
        border-left: 4px solid #0066cc;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 4px;
        font-size: 13px;
        color: #004085;
        word-break: break-all;
      }

      .recommendation {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 15px;
        margin-top: 30px;
        border-radius: 4px;
        font-size: 14px;
        color: #856404;
      }

      .recommendation h3 {
        margin-bottom: 10px;
        color: #856404;
        font-size: 16px;
      }

      .recommendation ul {
        margin-left: 20px;
        margin-top: 10px;
      }

      .recommendation li {
        margin: 5px 0;
      }

      .loading {
        text-align: center;
        padding: 40px;
        color: #666;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .spinner {
        display: inline-block;
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ” æµè§ˆå™¨å…¼å®¹æ€§æ£€æµ‹</h1>
      <div class="subtitle">æ£€æµ‹æ‚¨çš„æµè§ˆå™¨æ˜¯å¦æ”¯æŒäº”å¥½ä¼´å­¦æ‰€éœ€çš„åŠŸèƒ½</div>

      <div id="loading" class="loading">
        <div class="spinner"></div>
        <div>æ­£åœ¨æ£€æµ‹æµè§ˆå™¨åŠŸèƒ½...</div>
      </div>

      <div id="results" style="display: none">
        <!-- æ‘˜è¦ä¿¡æ¯ -->
        <div class="summary">
          <div class="summary-item">
            <span class="summary-label">æµè§ˆå™¨ç±»å‹:</span>
            <span class="summary-value" id="browser-type">-</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">å…¼å®¹æ€§è¯„åˆ†:</span>
            <span class="summary-value" id="compatibility-score">-</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">é€šè¿‡æ£€æµ‹:</span>
            <span class="summary-value" id="pass-count">-</span>
          </div>
        </div>

        <!-- User Agent -->
        <div class="info" id="user-agent"></div>

        <!-- ES6+ è¯­æ³•æ£€æµ‹ -->
        <div class="section">
          <div class="section-title">ES6+ è¯­æ³•æ”¯æŒ</div>
          <div id="syntax-checks"></div>
        </div>

        <!-- API æ£€æµ‹ -->
        <div class="section">
          <div class="section-title">æµè§ˆå™¨ API æ”¯æŒ</div>
          <div id="api-checks"></div>
        </div>

        <!-- Array æ–¹æ³• -->
        <div class="section">
          <div class="section-title">Array æ–¹æ³•æ”¯æŒ</div>
          <div id="array-checks"></div>
        </div>

        <!-- Object æ–¹æ³• -->
        <div class="section">
          <div class="section-title">Object æ–¹æ³•æ”¯æŒ</div>
          <div id="object-checks"></div>
        </div>

        <!-- String æ–¹æ³• -->
        <div class="section">
          <div class="section-title">String æ–¹æ³•æ”¯æŒ</div>
          <div id="string-checks"></div>
        </div>

        <!-- æ¨è -->
        <div class="recommendation" id="recommendation" style="display: none"></div>
      </div>
    </div>

    <script>
      // æ£€æµ‹ç»“æœå­˜å‚¨
      const results = {
        syntax: [],
        api: [],
        array: [],
        object: [],
        string: [],
      }

      // æ£€æµ‹å‡½æ•°
      function check(category, name, testFn) {
        const pass = testFn()
        results[category].push({ name, pass })
        return pass
      }

      // æ¸²æŸ“æ£€æµ‹ç»“æœ
      function renderCheck(container, name, pass) {
        const className = pass ? 'pass' : 'fail'
        const status = pass ? 'âœ“ æ”¯æŒ' : 'âœ— ä¸æ”¯æŒ'
        const div = document.createElement('div')
        div.className = `check-item ${className}`
        div.innerHTML = `
        <span class="check-name">${name}</span>
        <span class="check-status">${status}</span>
      `
        container.appendChild(div)
      }

      // è·å–æµè§ˆå™¨ç±»å‹
      function getBrowserType() {
        const ua = navigator.userAgent
        if (ua.includes('Chrome') && !ua.includes('Edge')) return 'Chrome'
        if (ua.includes('Safari') && !ua.includes('Chrome')) return 'Safari'
        if (ua.includes('Firefox')) return 'Firefox'
        if (ua.includes('Edge')) return 'Edge'
        if (ua.includes('MSIE') || ua.includes('Trident')) return 'IE'
        return 'æœªçŸ¥'
      }

      // æ‰§è¡Œæ£€æµ‹
      setTimeout(() => {
        // User Agent
        document.getElementById('user-agent').textContent = `User Agent: ${navigator.userAgent}`

        // ES6+ è¯­æ³•æ£€æµ‹
        check('syntax', 'Promise', () => typeof Promise !== 'undefined')
        check('syntax', 'async/await', () => {
          try {
            eval('(async () => {})()')
            return true
          } catch (e) {
            return false
          }
        })
        check('syntax', 'Optional Chaining (?.)', () => {
          try {
            eval('const obj = {}; obj?.test')
            return true
          } catch (e) {
            return false
          }
        })
        check('syntax', 'Nullish Coalescing (??)', () => {
          try {
            eval('const val = null ?? "default"')
            return true
          } catch (e) {
            return false
          }
        })
        check('syntax', 'Arrow Functions', () => {
          try {
            eval('(() => {})')
            return true
          } catch (e) {
            return false
          }
        })
        check('syntax', 'Template Literals', () => {
          try {
            eval('`template`')
            return true
          } catch (e) {
            return false
          }
        })
        check('syntax', 'Destructuring', () => {
          try {
            eval('const {a} = {a: 1}')
            return true
          } catch (e) {
            return false
          }
        })
        check('syntax', 'Spread Operator', () => {
          try {
            eval('const arr = [...[1, 2]]')
            return true
          } catch (e) {
            return false
          }
        })

        // API æ£€æµ‹
        check('api', 'fetch API', () => typeof fetch !== 'undefined')
        check('api', 'LocalStorage', () => {
          try {
            localStorage.setItem('test', '1')
            localStorage.removeItem('test')
            return true
          } catch (e) {
            return false
          }
        })
        check('api', 'SessionStorage', () => {
          try {
            sessionStorage.setItem('test', '1')
            sessionStorage.removeItem('test')
            return true
          } catch (e) {
            return false
          }
        })
        check('api', 'IntersectionObserver', () => typeof IntersectionObserver !== 'undefined')
        check('api', 'Proxy', () => typeof Proxy !== 'undefined')
        check('api', 'WeakMap', () => typeof WeakMap !== 'undefined')
        check('api', 'Set', () => typeof Set !== 'undefined')
        check('api', 'Map', () => typeof Map !== 'undefined')

        // Array æ–¹æ³•
        check('array', 'Array.includes', () => typeof Array.prototype.includes === 'function')
        check('array', 'Array.find', () => typeof Array.prototype.find === 'function')
        check('array', 'Array.findIndex', () => typeof Array.prototype.findIndex === 'function')
        check('array', 'Array.flat', () => typeof Array.prototype.flat === 'function')
        check('array', 'Array.flatMap', () => typeof Array.prototype.flatMap === 'function')
        check('array', 'Array.from', () => typeof Array.from === 'function')
        check('array', 'Array.of', () => typeof Array.of === 'function')

        // Object æ–¹æ³•
        check('object', 'Object.entries', () => typeof Object.entries === 'function')
        check('object', 'Object.values', () => typeof Object.values === 'function')
        check('object', 'Object.fromEntries', () => typeof Object.fromEntries === 'function')
        check('object', 'Object.assign', () => typeof Object.assign === 'function')
        check('object', 'Object.keys', () => typeof Object.keys === 'function')

        // String æ–¹æ³•
        check('string', 'String.includes', () => typeof String.prototype.includes === 'function')
        check(
          'string',
          'String.startsWith',
          () => typeof String.prototype.startsWith === 'function'
        )
        check('string', 'String.endsWith', () => typeof String.prototype.endsWith === 'function')
        check('string', 'String.repeat', () => typeof String.prototype.repeat === 'function')
        check('string', 'String.padStart', () => typeof String.prototype.padStart === 'function')
        check('string', 'String.padEnd', () => typeof String.prototype.padEnd === 'function')

        // æ¸²æŸ“ç»“æœ
        const syntaxContainer = document.getElementById('syntax-checks')
        const apiContainer = document.getElementById('api-checks')
        const arrayContainer = document.getElementById('array-checks')
        const objectContainer = document.getElementById('object-checks')
        const stringContainer = document.getElementById('string-checks')

        results.syntax.forEach((r) => renderCheck(syntaxContainer, r.name, r.pass))
        results.api.forEach((r) => renderCheck(apiContainer, r.name, r.pass))
        results.array.forEach((r) => renderCheck(arrayContainer, r.name, r.pass))
        results.object.forEach((r) => renderCheck(objectContainer, r.name, r.pass))
        results.string.forEach((r) => renderCheck(stringContainer, r.name, r.pass))

        // è®¡ç®—ç»Ÿè®¡
        const allResults = [
          ...results.syntax,
          ...results.api,
          ...results.array,
          ...results.object,
          ...results.string,
        ]
        const passCount = allResults.filter((r) => r.pass).length
        const totalCount = allResults.length
        const score = Math.round((passCount / totalCount) * 100)

        // æ›´æ–°æ‘˜è¦
        document.getElementById('browser-type').textContent = getBrowserType()
        document.getElementById('compatibility-score').textContent =
          `${score}% (${passCount}/${totalCount})`
        document.getElementById('pass-count').textContent = `${passCount} / ${totalCount}`

        // æ˜¾ç¤ºæ¨è
        const recommendation = document.getElementById('recommendation')
        if (score < 80) {
          recommendation.style.display = 'block'
          recommendation.innerHTML = `
          <h3>âš ï¸ æµè§ˆå™¨å…¼å®¹æ€§è¾ƒå·®</h3>
          <p>æ‚¨çš„æµè§ˆå™¨å¾—åˆ†: <strong>${score}%</strong>,å¯èƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨äº”å¥½ä¼´å­¦çš„æ‰€æœ‰åŠŸèƒ½ã€‚</p>
          <p><strong>å»ºè®®:</strong></p>
          <ul>
            <li>æ›´æ–°æ‚¨çš„æµè§ˆå™¨åˆ°æœ€æ–°ç‰ˆæœ¬</li>
            <li><strong>iOS ç”¨æˆ·</strong>: æ›´æ–°åˆ° iOS 13+ å¹¶ä½¿ç”¨æœ€æ–°ç‰ˆ Safari</li>
            <li><strong>Android ç”¨æˆ·</strong>: å®‰è£…æœ€æ–°ç‰ˆ Chrome æµè§ˆå™¨</li>
            <li>å¦‚æœæ— æ³•æ›´æ–°,è¯·è”ç³»æŠ€æœ¯æ”¯æŒ</li>
          </ul>
        `
        } else if (score < 95) {
          recommendation.style.display = 'block'
          recommendation.innerHTML = `
          <h3>âœ… æµè§ˆå™¨å…¼å®¹æ€§è‰¯å¥½</h3>
          <p>æ‚¨çš„æµè§ˆå™¨å¾—åˆ†: <strong>${score}%</strong>,å¯ä»¥æ­£å¸¸ä½¿ç”¨äº”å¥½ä¼´å­¦çš„å¤§éƒ¨åˆ†åŠŸèƒ½ã€‚</p>
          <p><strong>å»ºè®®</strong>: æ›´æ–°æµè§ˆå™¨åˆ°æœ€æ–°ç‰ˆæœ¬ä»¥è·å¾—æœ€ä½³ä½“éªŒã€‚</p>
        `
        } else {
          recommendation.style.display = 'block'
          recommendation.innerHTML = `
          <h3>ğŸ‰ æµè§ˆå™¨å…¼å®¹æ€§ä¼˜ç§€</h3>
          <p>æ‚¨çš„æµè§ˆå™¨å¾—åˆ†: <strong>${score}%</strong>,å®Œå…¨æ”¯æŒäº”å¥½ä¼´å­¦çš„æ‰€æœ‰åŠŸèƒ½!</p>
          <p>å¯ä»¥æ”¾å¿ƒä½¿ç”¨æ‰€æœ‰åŠŸèƒ½ã€‚</p>
        `
        }

        // æ˜¾ç¤ºç»“æœ,éšè—åŠ è½½
        document.getElementById('loading').style.display = 'none'
        document.getElementById('results').style.display = 'block'
      }, 500)
    </script>
  </body>
</html>
