@tailwind base;
@tailwind components;
@tailwind utilities;

/* 基础样式重置和自定义 */
@layer base {
  * {
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'PingFang SC', 'Helvetica Neue', Helvetica, 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    line-height: 1.6;
  }

  /* 链接样式 */
  a {
    color: theme('colors.primary.600');
    text-decoration: none;
    transition: color 0.2s ease;
  }

  a:hover {
    color: theme('colors.primary.700');
  }

  /* 标题样式 */
  h1, h2, h3, h4, h5, h6 {
    line-height: 1.25;
    font-weight: 600;
    color: theme('colors.gray.900');
  }

  /* 表单元素样式 */
  input, textarea, select {
    font-family: inherit;
  }

  /* 按钮基础样式 */
  button {
    font-family: inherit;
    cursor: pointer;
  }

  /* 图片响应式 */
  img {
    max-width: 100%;
    height: auto;
  }

  /* 代码块样式 */
  code {
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Liberation Mono', 'Menlo', monospace;
    font-size: 0.875em;
    background-color: theme('colors.gray.100');
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
  }

  pre {
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Liberation Mono', 'Menlo', monospace;
    background-color: theme('colors.gray.50');
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
  }

  pre code {
    background-color: transparent;
    padding: 0;
  }
}

/* 自定义组件样式 */
@layer components {
  /* 卡片组件 */
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden;
  }

  .card-header {
    @apply px-6 py-4 border-b border-gray-200 bg-gray-50;
  }

  .card-body {
    @apply px-6 py-4;
  }

  .card-footer {
    @apply px-6 py-4 border-t border-gray-200 bg-gray-50;
  }

  /* 按钮变体 */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 shadow-sm;
  }

  .btn-secondary {
    @apply btn bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 shadow-sm;
  }

  .btn-success {
    @apply btn bg-success-600 text-white hover:bg-success-700 focus:ring-success-500 shadow-sm;
  }

  .btn-warning {
    @apply btn bg-warning-600 text-white hover:bg-warning-700 focus:ring-warning-500 shadow-sm;
  }

  .btn-danger {
    @apply btn bg-danger-600 text-white hover:bg-danger-700 focus:ring-danger-500 shadow-sm;
  }

  .btn-outline {
    @apply btn border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500;
  }

  .btn-ghost {
    @apply btn text-gray-700 hover:bg-gray-100 focus:ring-gray-500;
  }

  /* 表单组件 */
  .form-group {
    @apply mb-4;
  }

  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-2;
  }

  .form-input {
    @apply block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors;
  }

  .form-textarea {
    @apply form-input resize-none;
  }

  .form-select {
    @apply form-input appearance-none bg-white bg-no-repeat bg-right pr-10;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-size: 1.25rem;
  }

  .form-error {
    @apply text-sm text-danger-600 mt-1;
  }

  /* 徽章组件 */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply badge bg-primary-100 text-primary-800;
  }

  .badge-success {
    @apply badge bg-success-100 text-success-800;
  }

  .badge-warning {
    @apply badge bg-warning-100 text-warning-800;
  }

  .badge-danger {
    @apply badge bg-danger-100 text-danger-800;
  }

  .badge-gray {
    @apply badge bg-gray-100 text-gray-800;
  }

  /* 提示框组件 */
  .alert {
    @apply p-4 rounded-lg border-l-4;
  }

  .alert-info {
    @apply alert bg-blue-50 border-blue-400 text-blue-700;
  }

  .alert-success {
    @apply alert bg-success-50 border-success-400 text-success-700;
  }

  .alert-warning {
    @apply alert bg-warning-50 border-warning-400 text-warning-700;
  }

  .alert-error {
    @apply alert bg-danger-50 border-danger-400 text-danger-700;
  }

  /* 加载状态 */
  .loading-skeleton {
    @apply bg-gray-200 animate-pulse rounded;
  }

  /* 分割线 */
  .divider {
    @apply border-t border-gray-200 my-4;
  }

  .divider-vertical {
    @apply border-l border-gray-200 mx-4 h-full;
  }

  /* 空状态 */
  .empty-state {
    @apply flex flex-col items-center justify-center py-12 text-center;
  }

  .empty-state-icon {
    @apply w-16 h-16 text-gray-400 mb-4;
  }

  .empty-state-title {
    @apply text-lg font-medium text-gray-900 mb-2;
  }

  .empty-state-description {
    @apply text-gray-500 max-w-md;
  }
}

/* 工具类扩展 */
@layer utilities {
  /* 文本截断 */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* 渐变背景 */
  .bg-gradient-primary {
    background: linear-gradient(135deg, theme('colors.primary.500') 0%, theme('colors.primary.700') 100%);
  }

  .bg-gradient-success {
    background: linear-gradient(135deg, theme('colors.success.500') 0%, theme('colors.success.700') 100%);
  }

  .bg-gradient-warning {
    background: linear-gradient(135deg, theme('colors.warning.500') 0%, theme('colors.warning.700') 100%);
  }

  .bg-gradient-danger {
    background: linear-gradient(135deg, theme('colors.danger.500') 0%, theme('colors.danger.700') 100%);
  }

  /* 玻璃态效果 */
  .glass {
    backdrop-filter: blur(16px) saturate(180%);
    background-color: rgba(255, 255, 255, 0.75);
    border: 1px solid rgba(255, 255, 255, 0.125);
  }

  .glass-dark {
    backdrop-filter: blur(16px) saturate(180%);
    background-color: rgba(17, 25, 39, 0.75);
    border: 1px solid rgba(255, 255, 255, 0.125);
  }

  /* 滚动条样式 */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.gray.400') theme('colors.gray.100');
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: theme('colors.gray.100');
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: theme('colors.gray.400');
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: theme('colors.gray.500');
  }

  /* 安全区域适配 */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
}

/* 暗色主题支持 */
@media (prefers-color-scheme: dark) {
  .dark-auto {
    @apply bg-gray-900 text-white;
  }
}

/* 打印样式 */
@media print {
  .no-print {
    display: none !important;
  }

  .print-only {
    display: block !important;
  }

  body {
    print-color-adjust: exact;
  }

  a[href]:after {
    content: " (" attr(href) ")";
    font-size: 90%;
    color: #666;
  }

  a[href^="#"]:after,
  a[href^="javascript:"]:after {
    content: "";
  }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  .card {
    @apply border-2 border-gray-800;
  }

  .btn {
    @apply border-2;
  }
}

/* 减少动画（尊重用户偏好） */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
