# 📱 小程序端测试完整流程指南

> **微信开发者工具测试步骤详解**  
> **适用于**: 五好伴学小程序  
> **测试环境**: 开发环境 + 生产 API  
> **预计时间**: 2-3 小时

---

## 🎯 测试目标

验证小程序所有功能在微信开发者工具中正常工作，确保与后端 API 的集成无误，为真机测试做准备。

---

## 📋 测试前准备工作

### 1. 环境检查

```bash
# 确认项目路径
cd /Users/liguoma/my-devs/python/wuhao-tutor

# 检查小程序目录
ls -la miniprogram/

# 检查重要配置文件
ls -la miniprogram/config/
ls -la miniprogram/utils/
```

### 2. 工具和账号准备

**必需工具**：

- [x] 微信开发者工具 (最新版)
- [x] Chrome/Safari 浏览器 (查看网络请求)
- [x] 测试用户账号 (手机号+密码)

**配置确认**：

- [x] API 地址: `https://121.199.173.244`
- [x] 登录方式: 手机号+密码
- [x] 后端服务: 已验证运行正常

---

## 🚀 第一阶段：基础启动测试 (30 分钟)

### Step 1: 启动微信开发者工具

```bash
# 1. 打开微信开发者工具
# 2. 选择"小程序" -> "导入项目"
# 3. 项目路径选择: /Users/liguoma/my-devs/python/wuhao-tutor/miniprogram
# 4. AppID: 使用测试号或留空
# 5. 项目名称: 五好伴学
```

**预期结果**：

- ✅ 项目正常加载
- ✅ 无严重编译错误
- ✅ 控制台无致命错误

### Step 2: 检查项目配置

**检查配置文件** `miniprogram/config/index.js`:

```javascript
// 确认API配置指向生产环境
const config = {
  environment: 'production', // 或 development
  api: {
    baseUrl: 'https://121.199.173.244',
    version: 'v1',
    timeout: 10000,
  },
}
```

**检查网络设置**:

- [ ] 打开"详情" -> "本地设置"
- [ ] 勾选"不校验合法域名、web-view、TLS 版本"
- [ ] 确认"ES6 转 ES5" 已勾选

### Step 3: 初始化启动

**启动步骤**：

1. 点击"编译" 按钮
2. 观察控制台输出
3. 检查模拟器显示

**检查清单**：

- [ ] 小程序正常启动，显示启动页面
- [ ] Console 无致命错误 (警告可忽略)
- [ ] 网络请求能正常发出
- [ ] 页面切换流畅

**常见问题处理**：

```javascript
// 如果遇到网络请求失败
// 检查 miniprogram/utils/request.js 中的配置

// 如果遇到页面跳转问题
// 检查 app.json 中的页面路径配置
```

---

## 🔐 第二阶段：登录功能测试 (30 分钟)

### Step 4: 登录页面测试

**测试步骤**：

1. 确认小程序启动后显示登录页面
2. 检查登录页面 UI 显示正常
3. 检查输入框功能

**登录页面检查清单**：

- [ ] 手机号输入框正常显示和输入
- [ ] 密码输入框正常显示和输入
- [ ] "登录" 按钮可点击
- [ ] "注册" 或相关链接正常
- [ ] 页面布局在不同屏幕尺寸下正常

### Step 5: 登录功能验证

**使用测试账号登录**：

```javascript
// 生产环境测试账号
测试手机号: 13800000001
测试密码: password123

// 或者检查是否有演示账号
// 查看 miniprogram/pages/login/ 目录下的代码
```

**登录流程测试**：

1. 输入测试手机号
2. 输入测试密码
3. 点击"登录"按钮
4. 观察网络请求和响应

**预期结果**：

- [ ] 发送登录请求到 `/api/v1/auth/login`
- [ ] 收到 Token 响应 (或相应错误信息)
- [ ] 登录成功后跳转到首页
- [ ] Token 存储到本地 Storage

**调试技巧**：

```javascript
// 在控制台查看网络请求
// 切换到 Network 标签
// 观察请求URL、参数、响应

// 查看本地存储
// 在控制台执行
wx.getStorageSync('access_token')
wx.getStorageSync('user_info')
```

---

## 🏠 第三阶段：首页和导航测试 (30 分钟)

### Step 6: 首页功能验证

**首页检查清单**：

- [ ] 登录成功后正确跳转到首页
- [ ] 用户信息正确显示 (姓名、头像等)
- [ ] 学习统计数据加载正常
- [ ] 快速入口按钮可点击
- [ ] 底部导航栏显示正常

**数据加载测试**：

- [ ] 检查首页 API 请求是否正常发出
- [ ] 数据加载有 loading 提示
- [ ] 数据加载失败有错误提示
- [ ] 页面刷新功能正常

### Step 7: 导航功能测试

**测试各个 Tab 页面**：

1. **首页** - 基础信息和统计
2. **学习** - 学习问答功能
3. **作业** - 作业批改功能
4. **错题** - 错题手册功能
5. **我的** - 个人中心

**导航检查清单**：

- [ ] 点击 Tab 能正确切换页面
- [ ] 页面切换动画流畅
- [ ] 每个页面初始化正常
- [ ] 返回按钮功能正常
- [ ] 页面状态保持正确

---

## 💬 第四阶段：核心功能深度测试 (45 分钟)

### Step 8: 学习问答功能测试

**文字问答测试**：

1. 进入学习问答页面
2. 输入测试问题："什么是数学？"
3. 点击发送
4. 观察 AI 回复

**测试清单**：

- [ ] 消息输入框正常
- [ ] 发送按钮可点击
- [ ] 发送请求到 `/api/v1/learning/ask`
- [ ] 收到 AI 回复并正确显示
- [ ] 对话历史正确保存
- [ ] 页面滚动和交互流畅

**图片识别测试**：

1. 点击图片上传按钮
2. 选择一张包含文字或题目的图片
3. 发送图片
4. 等待 AI 识别和回复

**图片功能检查**：

- [ ] 图片选择功能正常
- [ ] 图片上传进度显示
- [ ] 图片压缩和预览正常
- [ ] AI 能识别图片内容
- [ ] 回复针对图片内容

### Step 9: 作业批改功能测试

**作业上传测试**：

1. 进入作业功能页面
2. 点击"拍照上传"或"选择图片"
3. 选择作业图片
4. 等待 AI 批改结果

**作业功能检查**：

- [ ] 相机权限获取正常
- [ ] 图片选择和预览功能
- [ ] 作业上传进度提示
- [ ] AI 批改结果显示
- [ ] 错题自动添加到错题本
- [ ] 历史作业查看功能

### Step 10: 错题手册功能测试

**错题管理测试**：

1. 进入错题手册页面
2. 查看错题列表
3. 测试添加新错题
4. 测试今日复习功能

**错题功能检查**：

- [ ] 错题列表正确加载
- [ ] 手动添加错题功能
- [ ] 错题分类和标签
- [ ] 今日复习推荐
- [ ] 复习完成标记
- [ ] 掌握度统计更新

---

## 📊 第五阶段：个人中心和设置测试 (30 分钟)

### Step 11: 个人中心功能测试

**个人信息测试**：

1. 进入"我的"页面
2. 查看个人信息显示
3. 测试头像上传功能
4. 测试个人信息编辑

**个人中心检查**：

- [ ] 用户信息正确显示
- [ ] 头像上传和更新功能
- [ ] 个人资料编辑功能
- [ ] 学习统计数据显示
- [ ] 设置选项可访问

### Step 12: 登出和重新登录测试

**登出测试**：

1. 点击登出按钮
2. 确认返回登录页面
3. 确认本地数据清理

**重新登录测试**：

1. 重新输入账号密码登录
2. 确认数据恢复正常
3. 测试自动登录功能

**登出功能检查**：

- [ ] 登出按钮功能正常
- [ ] 清理本地存储数据
- [ ] 跳转到登录页面
- [ ] 重新登录功能正常
- [ ] 关闭重开自动登录

---

## 🔍 第六阶段：异常情况和边界测试 (30 分钟)

### Step 13: 网络异常测试

**网络中断模拟**：

1. 在开发者工具中选择"无网络"
2. 测试各种操作的处理
3. 恢复网络后验证功能

**异常情况检查**：

- [ ] 网络中断时显示友好提示
- [ ] 请求超时有重试机制
- [ ] 网络恢复后功能正常
- [ ] 离线状态下的基本功能

### Step 14: 数据边界测试

**输入验证测试**：

- [ ] 手机号格式验证
- [ ] 密码长度和复杂度
- [ ] 消息长度限制
- [ ] 图片大小和格式限制
- [ ] 特殊字符处理

**数据异常测试**：

- [ ] 空数据显示处理
- [ ] 大量数据加载性能
- [ ] 数据加载失败处理
- [ ] 数据更新冲突处理

---

## 📝 测试结果记录

### 测试通过标准

**基础功能** (必须 100%通过):

- [ ] 小程序正常启动和显示
- [ ] 登录功能完全正常
- [ ] 主要页面切换流畅
- [ ] 核心 API 调用成功

**高级功能** (建议 80%以上通过):

- [ ] AI 问答功能正常
- [ ] 图片上传和识别
- [ ] 作业批改功能
- [ ] 错题管理功能
- [ ] 个人中心功能

**用户体验** (建议 90%以上通过):

- [ ] 页面加载速度 < 2 秒
- [ ] 操作响应及时
- [ ] 错误提示友好
- [ ] 界面美观一致

### 问题记录模板

```markdown
## 发现的问题

### 问题 1: [简短描述]

**严重程度**: 高/中/低
**页面/功能**: 具体位置
**复现步骤**:

1.
2.
3.

**期望结果**:
**实际结果**:
**截图**: [如有]
**控制台日志**: [如有]

### 问题 2: ...
```

---

## 🎯 测试完成后的行动

### 如果测试全部通过 ✅

1. 记录测试通过的时间和版本
2. 准备进入真机测试阶段
3. 更新开发指南进度状态
4. 提交测试报告

### 如果发现问题 ⚠️

1. 按优先级分类问题 (高/中/低)
2. 高优先级问题立即修复
3. 中优先级问题计划修复
4. 低优先级问题记录备案
5. 修复后重新测试

### 下一阶段准备 🚀

1. 准备真机测试设备
2. 配置体验版本
3. 邀请测试用户
4. 制定真机测试计划

---

**📱 开始测试**: 按照上述流程逐步执行，每个步骤都要仔细验证！

**🔧 调试技巧**: 遇到问题时，重点查看微信开发者工具的 Console 和 Network 标签

**⏰ 时间控制**: 建议分 2-3 次完成，每次专注 1-2 个阶段，避免疲劳测试
