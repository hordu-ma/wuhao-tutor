# äº”å¥½ä¼´å­¦ (Wuhao Tutor)

> åŸºäºé˜¿é‡Œäº‘ç™¾ç‚¼æ™ºèƒ½ä½“çš„ K12 æ™ºèƒ½å­¦ä¹ æ”¯æŒå¹³å°  
> AI é©±åŠ¨çš„ä½œä¸šé—®ç­” + æ™ºèƒ½é”™é¢˜æ‰‹å†Œ + å­¦æƒ…åˆ†æ + çŸ¥è¯†å›¾è°±

ä¸€ä¸ªç°ä»£åŒ–çš„æ•™è‚²ç§‘æŠ€å¹³å°ï¼Œä¸“ä¸º K12 å­¦ç”Ÿï¼ˆå°å­¦åˆ°é«˜ä¸­ï¼‰æ‰“é€ ï¼Œåˆ©ç”¨é˜¿é‡Œäº‘ç™¾ç‚¼ AI æŠ€æœ¯æä¾›æ™ºèƒ½å­¦ä¹ é—®ç­”ã€é”™é¢˜ç®¡ç†ã€çŸ¥è¯†å›¾è°±æ„å»ºå’Œå…¨é¢çš„å­¦æƒ…åˆ†ææœåŠ¡ã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.11+-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)
![Vue](https://img.shields.io/badge/Vue-3.4+-4FC08D.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.6+-blue.svg)
![Status](https://img.shields.io/badge/status-Production-green.svg)

---

## ğŸ“Š é¡¹ç›®ç°çŠ¶

**ç”Ÿäº§ç¯å¢ƒ**: https://www.horsduroot.com (å·²éƒ¨ç½²è‡³é˜¿é‡Œäº‘ ECS)  
**æœåŠ¡å™¨**: 121.199.173.244 (Nginx + systemd + HTTPS)  
**æœ€åæ›´æ–°**: 2025-11-05  
**æŠ€æœ¯æ¶æ„**: FastAPI + Vue3 + å¾®ä¿¡å°ç¨‹åº + PostgreSQL + Redis + é˜¿é‡Œäº‘ç™¾ç‚¼ AI  
**å½“å‰ç‰ˆæœ¬**: v0.1.0

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

| æ¨¡å—             | çŠ¶æ€        | ç«¯å£æ”¯æŒ     | è¯´æ˜                                                      |
| ---------------- | ----------- | ------------ | --------------------------------------------------------- |
| **ä½œä¸šé—®ç­”**     | âœ… ç”Ÿäº§å¯ç”¨ | Web + å°ç¨‹åº | AI é©±åŠ¨çš„å­¦ä¹ åŠ©æ‰‹ï¼Œæ”¯æŒå¯¹è¯å¼é—®ç­”ã€æ•°å­¦å…¬å¼æ¸²æŸ“ã€æµå¼å“åº” |
| **é”™é¢˜æ‰‹å†Œ**     | âœ… ç”Ÿäº§å¯ç”¨ | Web + å°ç¨‹åº | é”™é¢˜è®°å½•ã€æ™ºèƒ½å¤ä¹ æé†’ã€çŸ¥è¯†ç‚¹å…³è”ã€è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿ç®—æ³•  |
| **çŸ¥è¯†å›¾è°±**     | âœ… ç”Ÿäº§å¯ç”¨ | Web + å°ç¨‹åº | çŸ¥è¯†ç‚¹å…³è”åˆ†æã€è–„å¼±ç‚¹è¯†åˆ«ã€å­¦ä¹ è·¯å¾„æ¨è                  |
| **å­¦ä¹ åˆ†æ**     | âœ… ç”Ÿäº§å¯ç”¨ | Web + å°ç¨‹åº | å­¦ä¹ æ—¶é•¿ç»Ÿè®¡ã€çŸ¥è¯†ç‚¹æŒæ¡åº¦ã€å­¦ç§‘åˆ†å¸ƒã€è¶‹åŠ¿åˆ†æ            |
| **ä¸ªäººä¸­å¿ƒ**     | âœ… ç”Ÿäº§å¯ç”¨ | Web + å°ç¨‹åº | ç”¨æˆ·ä¿¡æ¯ç®¡ç†ã€å¤´åƒä¸Šä¼ ã€å­¦ä¹ ç»Ÿè®¡å±•ç¤º                      |
| **å¾®ä¿¡å°ç¨‹åº**   | âœ… å·²ä¸Šçº¿   | å°ç¨‹åºåŸç”Ÿ   | å®Œæ•´åŠŸèƒ½è¦†ç›–ï¼Œè¿æ¥ç”Ÿäº§ç¯å¢ƒ API (horsduroot.com)           |
| **ç­”é¢˜è´¨é‡è¯„ä¼°** | âœ… ç”Ÿäº§å¯ç”¨ | Web + å°ç¨‹åº | AI é©±åŠ¨çš„ç­”æ¡ˆè´¨é‡è¯„åˆ†ã€æ”¹è¿›å»ºè®®                           |
| **è¯­éŸ³è¯†åˆ«**     | âœ… ç”Ÿäº§å¯ç”¨ | å°ç¨‹åº       | é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«ï¼Œæ”¯æŒè¯­éŸ³æé—®                              |
| **å›¾ç‰‡è¯†åˆ«**     | âœ… ç”Ÿäº§å¯ç”¨ | Web + å°ç¨‹åº | ä½œä¸šæ‹ç…§ã€é¢˜ç›®è¯†åˆ«ã€OCR æ–‡å­—æå–                          |

### ğŸ“š å…³é”®æ–‡æ¡£

| æ–‡æ¡£                                                | è¯´æ˜                                 |
| --------------------------------------------------- | ------------------------------------ |
| **[å¼€å‘è¿›åº¦](DEVELOPMENT_STATUS.md)** â­            | å½“å‰å¼€å‘çŠ¶æ€ã€å·²å®ŒæˆåŠŸèƒ½ã€ä¸‹é˜¶æ®µè®¡åˆ’ |
| **[é”™é¢˜æœ¬ä¼˜åŒ–æ–¹æ¡ˆ](MISTAKE_EXTRACTION_OPTIMIZATION.md)** ğŸ”¥ | é”™é¢˜æœ¬é€é¢˜æå–å¼€å‘æŒ‡å¯¼æ–‡æ¡£ï¼ˆæ–¹æ¡ˆAï¼‰ |
| **[æ›´æ–°æ—¥å¿—](CHANGELOG.md)**                        | ç‰ˆæœ¬æ›´æ–°å’ŒåŠŸèƒ½å˜æ›´è®°å½•               |
| **[å¼€å‘è·¯çº¿å›¾](DEVELOPMENT_ROADMAP.md)**            | é•¿æœŸå¼€å‘è§„åˆ’ï¼ˆ12 ä¸ªæœˆè·¯çº¿å›¾ï¼‰        |
| **[æ–‡æ¡£ä¸­å¿ƒ](docs/DOCS-README.md)**                 | å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£å¯¼èˆª                   |
| **[Copilot æŒ‡ä»¤](.github/copilot-instructions.md)** | AI è¾…åŠ©å¼€å‘è§„èŒƒ                      |

**æŒ‰ç±»åˆ«æµè§ˆ**:

- ğŸ“ [æ¶æ„è®¾è®¡](docs/architecture/) - ç³»ç»Ÿæ¶æ„ã€æ•°æ®æ¨¡å‹ã€API è®¾è®¡
- ğŸ”Œ [API æ–‡æ¡£](docs/api/) - æ¥å£æ–‡æ¡£ã€æ¨¡å‹å®šä¹‰
- ğŸ’¾ [æ•°æ®åº“](docs/database/) - è¡¨ç»“æ„ã€è¿ç§»è„šæœ¬
- ğŸ“± [å°ç¨‹åº](docs/miniprogram/) - å¾®ä¿¡å°ç¨‹åºå¼€å‘æ–‡æ¡£
- ğŸŒ [å‰ç«¯](docs/frontend/) - Web å‰ç«¯å¼€å‘æŒ‡å—
- ğŸ”§ [è§£å†³æ–¹æ¡ˆ](docs/solutions/) - å¸¸è§é—®é¢˜ä¿®å¤æ–¹æ¡ˆ
- ğŸ“– [ä½¿ç”¨æŒ‡å—](docs/guide/) - åŠŸèƒ½ä½¿ç”¨è¯´æ˜

### ğŸ¯ è¿‘æœŸæ›´æ–° (2025-11-05)

**é‡è¦è¯´æ˜**: å½“å‰å¾®ä¿¡å°ç¨‹åºç«¯ç›´æ¥è¿æ¥é˜¿é‡Œäº‘ç”Ÿäº§ç¯å¢ƒ (`https://www.horsduroot.com`)

- âœ… **å¾®ä¿¡å°ç¨‹åºå…¨é¢ä¸Šçº¿** - å®Œæ•´åŠŸèƒ½è¦†ç›–ï¼Œå·²è¿æ¥ç”Ÿäº§ç¯å¢ƒï¼Œæ”¯æŒé”™é¢˜æœ¬ã€ä½œä¸šé—®ç­”ã€å­¦ä¹ æŠ¥å‘Šç­‰
- âœ… **çŸ¥è¯†å›¾è°±å¯è§†åŒ–** - å‰åç«¯å®Œæ•´å®ç°ï¼Œæ”¯æŒçŸ¥è¯†ç‚¹å…³ç³»å±•ç¤ºå’Œè–„å¼±ç‚¹åˆ†æ
- âœ… **ç­”é¢˜è´¨é‡è¯„ä¼°ç³»ç»Ÿ** - AI é©±åŠ¨çš„ç­”æ¡ˆè´¨é‡è¯„åˆ†å’Œæ”¹è¿›å»ºè®®
- âœ… **è¯­éŸ³è¯†åˆ«é›†æˆ** - é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«æœåŠ¡ï¼Œæ”¯æŒå°ç¨‹åºè¯­éŸ³æé—®
- âœ… **å›¾ç‰‡ OCR å¤„ç†** - ä½œä¸šæ‹ç…§è¯†åˆ«ã€æ•°å­¦å…¬å¼æå–
- âœ… **å…¬å¼æ¸²æŸ“ä¼˜åŒ–** - KaTeX é›†æˆï¼Œæ”¯æŒå¤æ‚æ•°å­¦å…¬å¼å±•ç¤º
- âœ… **æ€§èƒ½ç›‘æ§ç³»ç»Ÿ** - å®Œæ•´çš„æ€§èƒ½æŒ‡æ ‡æ”¶é›†ã€æ…¢æŸ¥è¯¢ç›‘æ§ã€ç³»ç»Ÿèµ„æºè¿½è¸ª
- âœ… **å¤šå±‚é™æµä¿æŠ¤** - IP/ç”¨æˆ·/AI æœåŠ¡ä¸‰å±‚é™æµï¼ŒToken Bucket + Sliding Window åŒç®—æ³•

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ’¬ ä½œä¸šé—®ç­” (AI æ™ºèƒ½å­¦ä¹ åŠ©æ‰‹)

**åŸºäºé˜¿é‡Œäº‘ç™¾ç‚¼é€šä¹‰åƒé—®çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œæä¾›ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„å­¦ä¹ è¾…å¯¼**

**æ ¸å¿ƒèƒ½åŠ›**:

- **AI å¯¹è¯å¼•æ“**: åŸºäºé˜¿é‡Œäº‘ç™¾ç‚¼æ™ºèƒ½ä½“ï¼Œä½¿ç”¨é€šä¹‰åƒé—®å¤§æ¨¡å‹
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**: è‡ªåŠ¨ç»´æŒä¼šè¯ä¸Šä¸‹æ–‡ï¼Œç†è§£è¿ç»­æé—®æ„å›¾
- **å¤šæ¨¡æ€è¾“å…¥**: æ”¯æŒæ–‡å­—ã€å›¾ç‰‡ï¼ˆOCRï¼‰ã€è¯­éŸ³ï¼ˆASRï¼‰ä¸‰ç§è¾“å…¥æ–¹å¼
- **æµå¼å“åº”**: Server-Sent Events (SSE) å®æ—¶æµå¼è¾“å‡ºï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
- **å…¬å¼æ¸²æŸ“**: KaTeX å®Œæ•´æ”¯æŒï¼Œå®Œç¾æ˜¾ç¤ºæ•°å­¦å…¬å¼ã€ç¬¦å·å’Œæ–¹ç¨‹å¼
- **å­¦æƒ…å…³è”**: MCP ä¸Šä¸‹æ–‡æœåŠ¡é›†æˆï¼Œç»“åˆè–„å¼±çŸ¥è¯†ç‚¹æä¾›ä¸ªæ€§åŒ–ç­”æ¡ˆ
- **ä¼šè¯ç®¡ç†**: æ”¯æŒå¤šä¼šè¯å¹¶è¡Œã€ä¼šè¯å½’æ¡£ã€å†å²è®°å½•æœç´¢å’Œæ ‡ç­¾åˆ†ç±»

**æŠ€æœ¯å®ç°**:

- é€šä¹‰åƒé—®é£æ ¼æç®€ UI (ä¸‰æ å¯æŠ˜å å¸ƒå±€)
- `BailianService` ç»Ÿä¸€ AI è°ƒç”¨å°è£…ï¼Œæ”¯æŒé‡è¯•å’Œè¶…æ—¶æ§åˆ¶
- `LearningService` å®Œæ•´ä¸šåŠ¡é€»è¾‘å±‚ (~2,400 è¡Œ)
- Markdown æ¸²æŸ“ + ä»£ç é«˜äº® (highlight.js)
- WebSocket æ”¯æŒå®æ—¶åŒå‘é€šä¿¡

**API ç«¯ç‚¹** (25+ ä¸ª):

```
POST   /api/v1/learning/ask              # æ ‡å‡†é—®ç­”
POST   /api/v1/learning/ask-stream       # æµå¼é—®ç­”
POST   /api/v1/learning/voice-to-text    # è¯­éŸ³è¯†åˆ«
POST   /api/v1/learning/image-ocr        # å›¾ç‰‡è¯†åˆ«
GET    /api/v1/learning/sessions         # ä¼šè¯åˆ—è¡¨
POST   /api/v1/learning/sessions         # åˆ›å»ºä¼šè¯
GET    /api/v1/learning/sessions/{id}/history  # ä¼šè¯å†å²
WebSocket /api/v1/learning/ws/ask        # WebSocket å®æ—¶é—®ç­”
```

### ğŸ“š é”™é¢˜æ‰‹å†Œ (æ™ºèƒ½å¤ä¹ ç³»ç»Ÿ)

**åŸºäºè‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿çš„æ™ºèƒ½é”™é¢˜ç®¡ç†å’Œå¤ä¹ ç³»ç»Ÿ**

**æ ¸å¿ƒåŠŸèƒ½**:

- **æ™ºèƒ½è®°å½•**: æ‰‹åŠ¨æ·»åŠ æˆ–ä»å­¦ä¹ é—®ç­”ä¸­ä¸€é”®è®°å½•é”™é¢˜
- **å¤ä¹ ç®—æ³•**: SpacedRepetitionAlgorithm å®ç°è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿
- **çŸ¥è¯†å…³è”**: è‡ªåŠ¨æå–çŸ¥è¯†ç‚¹æ ‡ç­¾ï¼Œæ„å»ºçŸ¥è¯†å›¾è°±å…³è”
- **æŒæ¡åº¦è·Ÿè¸ª**: åŸºäºå¤ä¹ æ¬¡æ•°å’Œæ­£ç¡®ç‡çš„æŒæ¡åº¦è¯„åˆ† (0-100)
- **ä»Šæ—¥å¤ä¹ **: æ¯æ—¥è‡ªåŠ¨ç”Ÿæˆå¾…å¤ä¹ é”™é¢˜æ¸…å•
- **ç»Ÿè®¡åˆ†æ**: é”™é¢˜åˆ†å¸ƒã€æŒæ¡åº¦è¶‹åŠ¿ã€å¤ä¹ æ•ˆæœè¿½è¸ªã€å­¦ç§‘åˆ†æ

**æŠ€æœ¯æ¶æ„**:

- `MistakeService` å®Œæ•´ä¸šåŠ¡é€»è¾‘ (~1,260 è¡Œ)
- `MistakeRepository` + `MistakeReviewRepository` åŒä»“å‚¨æ¨¡å¼
- æ•°æ®è¡¨: `mistake_records` + `mistake_reviews`
- æ”¯æŒ SQLite (å¼€å‘) å’Œ PostgreSQL (ç”Ÿäº§)

**å¤ä¹ é—´éš”ç®—æ³•**:

```python
å¤ä¹ æ¬¡æ•°  é—´éš”å¤©æ•°  æŒæ¡åº¦é˜ˆå€¼
0        1å¤©      60%
1        2å¤©      70%
2        4å¤©      80%
3        7å¤©      85%
4        15å¤©     90%
5+       30å¤©     95%
```

**API ç«¯ç‚¹** (10+ ä¸ª):

```
GET    /api/v1/mistakes              # é”™é¢˜åˆ—è¡¨
POST   /api/v1/mistakes              # åˆ›å»ºé”™é¢˜
GET    /api/v1/mistakes/{id}         # é”™é¢˜è¯¦æƒ…
PUT    /api/v1/mistakes/{id}         # æ›´æ–°é”™é¢˜
DELETE /api/v1/mistakes/{id}         # åˆ é™¤é”™é¢˜
POST   /api/v1/mistakes/{id}/review  # æäº¤å¤ä¹ 
GET    /api/v1/mistakes/today-review # ä»Šæ—¥å¾…å¤ä¹ 
GET    /api/v1/mistakes/statistics   # ç»Ÿè®¡åˆ†æ
```

### ğŸ•¸ï¸ çŸ¥è¯†å›¾è°± (çŸ¥è¯†ç‚¹å…³è”ç³»ç»Ÿ)

**æ™ºèƒ½çŸ¥è¯†ç‚¹è¯†åˆ«ã€å…³è”åˆ†æå’Œå­¦ä¹ è·¯å¾„æ¨è**

**æ ¸å¿ƒåŠŸèƒ½**:

- **çŸ¥è¯†ç‚¹æå–**: AI è‡ªåŠ¨ä»é”™é¢˜å’Œé—®ç­”ä¸­æå–çŸ¥è¯†ç‚¹
- **å…³ç³»å»ºæ¨¡**: å‰ç½®å…³ç³»ã€å¹¶åˆ—å…³ç³»ã€åº”ç”¨å…³ç³»ä¸‰ç§å…³è”ç±»å‹
- **è–„å¼±ç‚¹è¯†åˆ«**: åŸºäºæŒæ¡åº¦å’Œé”™è¯¯ç‡çš„è–„å¼±çŸ¥è¯†ç‚¹åˆ†æ
- **å­¦ä¹ è·¯å¾„**: æ ¹æ®å‰ç½®å…³ç³»ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
- **å¯è§†åŒ–å±•ç¤º**: ECharts å›¾è°±å¯è§†åŒ–ï¼Œæ”¯æŒèŠ‚ç‚¹äº¤äº’

**æ•°æ®æ¨¡å‹**:

- `KnowledgeNode`: çŸ¥è¯†ç‚¹èŠ‚ç‚¹ (å­¦ç§‘ã€éš¾åº¦ã€æŒæ¡åº¦)
- `KnowledgeRelation`: çŸ¥è¯†ç‚¹å…³ç³» (å…³ç³»ç±»å‹ã€æƒé‡)
- `MistakeKnowledgePoint`: é”™é¢˜-çŸ¥è¯†ç‚¹å…³è”
- `UserKnowledgeGraphSnapshot`: ç”¨æˆ·çŸ¥è¯†å›¾è°±å¿«ç…§

**API ç«¯ç‚¹**:

```
GET    /api/v1/knowledge-graph/user/{user_id}  # ç”¨æˆ·çŸ¥è¯†å›¾è°±
GET    /api/v1/knowledge-graph/weak-points     # è–„å¼±çŸ¥è¯†ç‚¹
GET    /api/v1/knowledge-graph/learning-path   # å­¦ä¹ è·¯å¾„æ¨è
```

### ğŸ“Š å­¦ä¹ åˆ†æ (å…¨ç»´åº¦å­¦æƒ…ç»Ÿè®¡)

**å¤šç»´åº¦å­¦ä¹ æ•°æ®ç»Ÿè®¡ã€å¯è§†åŒ–å’Œæ™ºèƒ½å»ºè®®**

**åˆ†æç»´åº¦**:

- **å­¦ä¹ è¿›åº¦**: å­¦ä¹ æ—¶é•¿ã€æé—®æ¬¡æ•°ã€æ´»è·ƒå¤©æ•°ã€è¿ç»­å­¦ä¹ å¤©æ•°
- **çŸ¥è¯†æŒæ¡**: åŸºäºç­”é¢˜è®°å½•çš„çŸ¥è¯†ç‚¹æŒæ¡åº¦åˆ†æ (0-100 åˆ†)
- **å­¦ç§‘åˆ†å¸ƒ**: å„å­¦ç§‘å­¦ä¹ æ—¶é•¿å æ¯”ã€å¹³å‡åˆ†ã€æå‡è¶‹åŠ¿
- **æ—¶é—´åºåˆ—**: æ”¯æŒæ—¥/å‘¨/æœˆå¤šç²’åº¦æ•°æ®èšåˆ
- **å¯¹æ¯”åˆ†æ**: åŒå­¦ç§‘å†å²å¯¹æ¯”ã€åŒå¹´çº§å¹³å‡å¯¹æ¯”

**æ ¸å¿ƒæŒ‡æ ‡**:

```python
å­¦ä¹ æ—¶é•¿    # é—®ç­”æ€»æ—¶é•¿ + å¤ä¹ æ€»æ—¶é•¿
æé—®æ¬¡æ•°    # æœ‰æ•ˆé—®ç­”æ¬¡æ•°
æ´»è·ƒå¤©æ•°    # æœ‰å­¦ä¹ è®°å½•çš„å¤©æ•°
çŸ¥è¯†ç‚¹æ•°    # å­¦ä¹ è¿‡çš„çŸ¥è¯†ç‚¹æ€»æ•°
æŒæ¡åº¦      # åŠ æƒå¹³å‡æŒæ¡åº¦ (0-100)
æ­£ç¡®ç‡      # ç­”é¢˜æ­£ç¡®ç‡ç™¾åˆ†æ¯”
```

**API ç«¯ç‚¹** (8+ ä¸ª):

```
GET    /api/v1/analytics/learning-progress    # å­¦ä¹ è¿›åº¦è¶‹åŠ¿
GET    /api/v1/analytics/knowledge-mastery    # çŸ¥è¯†ç‚¹æŒæ¡
GET    /api/v1/analytics/subject-stats        # å­¦ç§‘ç»Ÿè®¡
GET    /api/v1/analytics/study-time           # å­¦ä¹ æ—¶é•¿åˆ†æ
GET    /api/v1/analytics/weak-subjects        # è–„å¼±å­¦ç§‘
```

### ğŸ¯ ç­”é¢˜è´¨é‡è¯„ä¼°

**AI é©±åŠ¨çš„ç­”æ¡ˆè´¨é‡è¯„åˆ†å’Œæ”¹è¿›å»ºè®®ç³»ç»Ÿ**

**è¯„ä¼°ç»´åº¦**:

- å‡†ç¡®æ€§è¯„åˆ† (0-100)
- å®Œæ•´æ€§è¯„åˆ† (0-100)
- æ¸…æ™°åº¦è¯„åˆ† (0-100)
- æ€»ä½“è´¨é‡åˆ†æ•°
- å…·ä½“æ”¹è¿›å»ºè®®

**æ•°æ®æ¨¡å‹**: `AnswerQualityScore` è¡¨å­˜å‚¨æ‰€æœ‰è¯„ä¼°è®°å½•

### ğŸ”’ ä¼ä¸šçº§å®‰å…¨ç‰¹æ€§

**å¤šå±‚é˜²æŠ¤ä½“ç³»ï¼Œä¿éšœç³»ç»Ÿç¨³å®šè¿è¡Œ**

**é™æµä¿æŠ¤** (ä¸‰å±‚é™æµ):

```python
# IP å±‚é™æµ (é˜² DDoS)
IP çº§åˆ«:     100 è¯·æ±‚/åˆ†é’Ÿ (Token Bucket)
# ç”¨æˆ·å±‚é™æµ (é˜²æ»¥ç”¨)
ç”¨æˆ·çº§åˆ«:     50 è¯·æ±‚/åˆ†é’Ÿ (Token Bucket)
# AI æœåŠ¡é™æµ (æ§åˆ¶æˆæœ¬)
AI æœåŠ¡:      20 è¯·æ±‚/åˆ†é’Ÿ (Sliding Window)
# ç™»å½•ç«¯ç‚¹é™æµ (é˜²æš´åŠ›ç ´è§£)
ç™»å½•ç«¯ç‚¹:     10 è¯·æ±‚/åˆ†é’Ÿ (Token Bucket)
```

**å®‰å…¨å¤´é…ç½®**:

- Content-Security-Policy (CSP)
- X-Frame-Options: DENY
- X-Content-Type-Options: nosniff
- Strict-Transport-Security (HSTS)
- X-XSS-Protection

**è®¤è¯æœºåˆ¶**:

- JWT åŒ Token (Access + Refresh)
- Access Token: 8 å¤©æœ‰æ•ˆæœŸ
- Refresh Token: 30 å¤©æœ‰æ•ˆæœŸ
- è‡ªåŠ¨ç»­æœŸæœºåˆ¶

**æ€§èƒ½ç›‘æ§**:

- å®æ—¶æ€§èƒ½æŒ‡æ ‡æ”¶é›† (`PerformanceMonitoringMiddleware`)
- æ…¢æŸ¥è¯¢è‡ªåŠ¨ç›‘æ§ (>1.0 ç§’è‡ªåŠ¨è®°å½•)
- N+1 æŸ¥è¯¢æ£€æµ‹å’Œè­¦å‘Š
- ç³»ç»Ÿèµ„æºç›‘æ§ (CPUã€å†…å­˜ã€ç£ç›˜)

**ä¸­é—´ä»¶å †æ ˆ** (æ‰§è¡Œé¡ºåº):

```
1. PerformanceMonitoringMiddleware  # æ€§èƒ½ç›‘æ§
2. SecurityHeadersMiddleware        # å®‰å…¨å¤´
3. RateLimitMiddleware              # é™æµä¿æŠ¤
4. CORSMiddleware                   # è·¨åŸŸå¤„ç†
5. TrustedHostMiddleware            # ä¸»æœºéªŒè¯
6. LoggingMiddleware                # æ—¥å¿—è®°å½•
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å¤šç«¯æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å®¢æˆ·ç«¯å±‚ (Client Tier)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Web å‰ç«¯          â”‚  å¾®ä¿¡å°ç¨‹åº                      â”‚
â”‚  Vue3 + TS        â”‚  åŸç”Ÿ JS + TS å£°æ˜                â”‚
â”‚  Element Plus     â”‚  å¾®ä¿¡åŸç”Ÿç»„ä»¶                     â”‚
â”‚  Vite 5.x         â”‚  å¾®ä¿¡å¼€å‘è€…å·¥å…·                   â”‚
â”‚  Port: 5173       â”‚  è¿æ¥ç”Ÿäº§ç¯å¢ƒ API                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“  HTTPS / API Calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            API ç½‘å…³å±‚ (API Gateway)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Nginx åå‘ä»£ç† (443 â†’ 8000)                         â”‚
â”‚  - SSL/TLS ç»ˆæ­¢ (Let's Encrypt)                      â”‚
â”‚  - é™æ€æ–‡ä»¶æ‰˜ç®¡ (/var/www/html)                      â”‚
â”‚  - è¯·æ±‚è·¯ç”± (/api â†’ Backend)                         â”‚
â”‚  - Gzip å‹ç¼©                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åç«¯æœåŠ¡å±‚ (Backend Services)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FastAPI åº”ç”¨ (å¼‚æ­¥ ASGI)                             â”‚
â”‚  - Uvicorn ASGI æœåŠ¡å™¨                                â”‚
â”‚  - ä¸­é—´ä»¶å †æ ˆ (ç›‘æ§/å®‰å…¨/é™æµ/æ—¥å¿—)                   â”‚
â”‚  - å››å±‚æ¶æ„ (API/Service/Repository/Model)           â”‚
â”‚  - systemd æœåŠ¡ç®¡ç†                                   â”‚
â”‚  Port: 8000 (å†…éƒ¨)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                      â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL   â”‚    â”‚   Redis      â”‚    â”‚ é˜¿é‡Œäº‘æœåŠ¡    â”‚
â”‚ ä¸»æ•°æ®åº“     â”‚    â”‚   ç¼“å­˜       â”‚    â”‚ - ç™¾ç‚¼ AI     â”‚
â”‚ Port: 5432   â”‚    â”‚ Port: 6379   â”‚    â”‚ - è¯­éŸ³è¯†åˆ«    â”‚
â”‚              â”‚    â”‚              â”‚    â”‚ - OSS å­˜å‚¨    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆè¯¦è§£

```yaml
# ===== åç«¯æŠ€æœ¯æ ˆ =====
åç«¯æ¡†æ¶:
  è¯­è¨€: Python 3.11+
  æ¡†æ¶: FastAPI 0.104+ (å¼‚æ­¥é«˜æ€§èƒ½ Web æ¡†æ¶)
  ASGI æœåŠ¡å™¨: Uvicorn (æ ‡å‡† ASGI å®ç°)
  åŒ…ç®¡ç†å™¨: uv (å¿«é€Ÿ Python åŒ…ç®¡ç†)

æ•°æ®è®¿é—®:
  ORM: SQLAlchemy 2.x (Async Engine)
  è¿ç§»: Alembic 1.12+
  éªŒè¯: Pydantic v2 (Settings + æ•°æ®æ¨¡å‹)
  è¿æ¥æ± : asyncpg (PostgreSQL) / aiosqlite (SQLite)

è®¤è¯ä¸å®‰å…¨:
  JWT: python-jose + cryptography
  å¯†ç å“ˆå¸Œ: bcrypt (12 è½®åŠ ç›)
  Token ç±»å‹: Access (8å¤©) + Refresh (30å¤©)
  é™æµç®—æ³•: Token Bucket + Sliding Window

# ===== æ•°æ®åº“ä¸ç¼“å­˜ =====
ä¸»æ•°æ®åº“:
  ç”Ÿäº§: PostgreSQL 14+ (é˜¿é‡Œäº‘ RDS)
  å¼€å‘: SQLite (æœ¬åœ°æ–‡ä»¶)
  ç‰¹æ€§: å¼‚æ­¥æŸ¥è¯¢ã€è¿æ¥æ± ã€äº‹åŠ¡ç®¡ç†

ç¼“å­˜ä¸ä¼šè¯:
  ç¼“å­˜: Redis 6+ (å•æœºæ¨¡å¼)
  ç”¨é€”:
    - é™æµè®¡æ•°å™¨ (Token Bucket)
    - Refresh Token å­˜å‚¨
    - ä¼šè¯æ•°æ®ç¼“å­˜
    - çƒ­ç‚¹æ•°æ®ç¼“å­˜
  å®¢æˆ·ç«¯: aioredis 2.x (å¼‚æ­¥)

# ===== AI æœåŠ¡é›†æˆ =====
é˜¿é‡Œäº‘ç™¾ç‚¼:
  æä¾›å•†: é˜¿é‡Œäº‘ç™¾ç‚¼æ™ºèƒ½ä½“å¹³å°
  æ¨¡å‹: é€šä¹‰åƒé—® (Qwen)
  åŠŸèƒ½:
    - å­¦ä¹ é—®ç­” (Chat Completion)
    - ä½œä¸šæ‰¹æ”¹ (æ‰¹é‡å¤„ç†)
    - çŸ¥è¯†ç‚¹æå– (NLP)
  æ¶æ„: å•ä¸€æ™ºèƒ½ä½“ + åœºæ™¯å‚æ•°åŒ–
  ç­–ç•¥: MCP ç²¾ç¡®æŸ¥è¯¢ + ä¸Šä¸‹æ–‡å¢å¼º
  è¶…æ—¶: 120 ç§’ (æ”¯æŒå›¾ç‰‡ OCR)
  é‡è¯•: æœ€å¤š 3 æ¬¡ (æŒ‡æ•°é€€é¿)

é˜¿é‡Œäº‘è¯­éŸ³:
  æœåŠ¡: å®æ—¶è¯­éŸ³è¯†åˆ« (ASR)
  æ ¼å¼: MP3, 16kHz
  ç‰¹æ€§: æ™ºèƒ½æ–­å¥ã€é€†æ–‡æœ¬æ­£åˆ™åŒ–
  æœ€å¤§æ—¶é•¿: 60 ç§’

é˜¿é‡Œäº‘ OSS:
  å­˜å‚¨æ¡¶: wuhao-tutor-files
  åŒºåŸŸ: cn-hangzhou
  ç”¨é€”: ç”¨æˆ·å¤´åƒã€ä½œä¸šå›¾ç‰‡ã€æ–‡ä»¶ä¸Šä¼ 
  æœ€å¤§æ–‡ä»¶: 10MB
  å…è®¸æ ¼å¼: jpg, jpeg, png, pdf, webp

# ===== Web å‰ç«¯ =====
Web å‰ç«¯:
  æ¡†æ¶: Vue 3.4+ (Composition API)
  è¯­è¨€: TypeScript 5.6+
  UI åº“: Element Plus 2.5+
  æ„å»ºå·¥å…·: Vite 5+ (ESM æ„å»º)
  çŠ¶æ€ç®¡ç†: Pinia 2.1+ (Vue å®˜æ–¹æ¨è)
  è·¯ç”±: Vue Router 4.x
  HTTP å®¢æˆ·ç«¯: Axios 1.6+

å‰ç«¯ç‰¹æ€§:
  æ•°å­¦å…¬å¼: KaTeX 0.16+ (LaTeX æ¸²æŸ“)
  Markdown: marked 16.x + highlight.js
  å›¾è¡¨: ECharts 6.0 + vue-echarts
  æ ·å¼: Tailwind CSS + SCSS
  å›¾ç‰‡å‹ç¼©: browser-image-compression
  æ—¥æœŸå¤„ç†: Day.js 1.11+

# ===== å¾®ä¿¡å°ç¨‹åº =====
å°ç¨‹åºç«¯:
  è¯­è¨€: åŸç”Ÿ JavaScript + TypeScript å£°æ˜
  æ¡†æ¶: å¾®ä¿¡å°ç¨‹åºåŸç”Ÿ API
  UI: å¾®ä¿¡åŸç”Ÿç»„ä»¶ + è‡ªå®šä¹‰ç»„ä»¶
  ç½‘ç»œ: è‡ªå®šä¹‰è¯·æ±‚å°è£… (utils/request.js)
  çŠ¶æ€: å…¨å±€ App æ•°æ® + é¡µé¢ data
  ç¼“å­˜: wx.storage (æœ¬åœ°å­˜å‚¨)

å°ç¨‹åºç‰¹æ€§:
  API åœ°å€: https://www.horsduroot.com (ç”Ÿäº§)
  è¶…æ—¶: 120 ç§’ (æ”¯æŒå›¾ç‰‡ä¸Šä¼ å’Œ AI å¤„ç†)
  é‡è¯•: 3 æ¬¡è‡ªåŠ¨é‡è¯•
  ç¦»çº¿: æ•°æ®ç¼“å­˜ + åŒæ­¥ç®¡ç†
  æ€§èƒ½: è¯·æ±‚é˜Ÿåˆ— + ä¼˜å…ˆçº§è°ƒåº¦
  å®‰å…¨: Token è‡ªåŠ¨åˆ·æ–° + 401 æ‹¦æˆª

# ===== å¼€å‘ä¸æ„å»º =====
å¼€å‘å·¥å…·:
  Python:
    - uv (å¿«é€ŸåŒ…ç®¡ç†ï¼Œæ›¿ä»£ pip)
    - Black (ä»£ç æ ¼å¼åŒ–ï¼Œ88 å­—ç¬¦)
    - Flake8 (ä»£ç æ£€æŸ¥)
    - mypy (ç±»å‹æ£€æŸ¥ï¼Œstrict æ¨¡å¼)
    - pytest (å•å…ƒæµ‹è¯• + è¦†ç›–ç‡)

  Node.js:
    - npm (åŒ…ç®¡ç†)
    - ESLint (TS/Vue ä»£ç æ£€æŸ¥)
    - Prettier (ä»£ç æ ¼å¼åŒ–)
    - Vitest (å•å…ƒæµ‹è¯•)
    - vue-tsc (ç±»å‹æ£€æŸ¥)

ç‰ˆæœ¬æ§åˆ¶:
  Git: åˆ†æ”¯ç­–ç•¥ (main/develop/feature/*)
  æäº¤è§„èŒƒ: Conventional Commits
  CI/CD: è®¡åˆ’é›†æˆ GitHub Actions

# ===== éƒ¨ç½²ä¸è¿ç»´ =====
ç”Ÿäº§éƒ¨ç½²:
  æœåŠ¡å™¨: é˜¿é‡Œäº‘ ECS (121.199.173.244)
  åŸŸå: horsduroot.com (HTTPS)
  ç³»ç»Ÿ: Linux + systemd
  åå‘ä»£ç†: Nginx 1.x
  SSL: Let's Encrypt (è‡ªåŠ¨ç»­æœŸ)
  è¿›ç¨‹ç®¡ç†: systemd (wuhao-tutor.service)
  æ—¥å¿—: journalctl + åº”ç”¨æ—¥å¿—

éƒ¨ç½²ç›®å½•:
  åç«¯: /opt/wuhao-tutor
  å‰ç«¯: /var/www/html
  æ—¥å¿—: /var/log/wuhao-tutor
  é…ç½®: /opt/wuhao-tutor/.env.production

ç›‘æ§å‘Šè­¦:
  æ€§èƒ½ç›‘æ§: å†…ç½® MetricsCollector
  ç³»ç»Ÿç›‘æ§: SystemCollector (CPU/å†…å­˜/ç£ç›˜)
  æ…¢æŸ¥è¯¢: è‡ªåŠ¨è®°å½• (>1.0 ç§’)
  Prometheus: é…ç½®å°±ç»ª (å¾…å¯ç”¨)
```

### å››å±‚æ¶æ„è®¾è®¡ (ä¸¥æ ¼åˆ†å±‚)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Layer (src/api/v1/endpoints/)                  â”‚
â”‚  - 25+ å­¦ä¹ é—®ç­”ç«¯ç‚¹                                   â”‚
â”‚  - 10+ é”™é¢˜ç®¡ç†ç«¯ç‚¹                                   â”‚
â”‚  - 8+ å­¦ä¹ åˆ†æç«¯ç‚¹                                    â”‚
â”‚  - 5+ ç”¨æˆ·è®¤è¯ç«¯ç‚¹                                    â”‚
â”‚  - 3+ çŸ¥è¯†å›¾è°±ç«¯ç‚¹                                    â”‚
â”‚  èŒè´£: HTTP è¯·æ±‚å¤„ç†ã€å‚æ•°éªŒè¯ã€å“åº”æ ¼å¼åŒ–            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Service Layer (src/services/)                       â”‚
â”‚  - BailianService (AI æœåŠ¡ï¼Œ1000+ è¡Œ)                â”‚
â”‚  - LearningService (é—®ç­”ä¸šåŠ¡ï¼Œ2400+ è¡Œ)              â”‚
â”‚  - MistakeService (é”™é¢˜ä¸šåŠ¡ï¼Œ1260+ è¡Œ)               â”‚
â”‚  - KnowledgeGraphService (çŸ¥è¯†å›¾è°±)                  â”‚
â”‚  - AnalyticsService (å­¦ä¹ åˆ†æ)                        â”‚
â”‚  - AuthService (è®¤è¯æˆæƒ)                             â”‚
â”‚  èŒè´£: ä¸šåŠ¡é€»è¾‘ã€äº‹åŠ¡ç®¡ç†ã€å¤š Repository ç»„åˆ         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Repository Layer (src/repositories/)                â”‚
â”‚  - BaseRepository[T] (æ³›å‹åŸºç±»)                       â”‚
â”‚  - MistakeRepository                                  â”‚
â”‚  - LearningRepository                                 â”‚
â”‚  - KnowledgeGraphRepository                           â”‚
â”‚  - AnalyticsRepository                                â”‚
â”‚  èŒè´£: æ•°æ®è®¿é—®ã€å¤æ‚æŸ¥è¯¢ã€æ•°æ®è½¬æ¢                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Model Layer (src/models/)                           â”‚
â”‚  - BaseModel (é€šç”¨åŸºç±»)                               â”‚
â”‚  - User (ç”¨æˆ·ï¼Œæ”¯æŒ K12 å…¨å­¦æ®µ)                       â”‚
â”‚  - MistakeRecord + MistakeReview (é”™é¢˜)              â”‚
â”‚  - ChatSession + Question + Answer (é—®ç­”)            â”‚
â”‚  - KnowledgeNode + KnowledgeRelation (çŸ¥è¯†å›¾è°±)      â”‚
â”‚  - LearningAnalytics (å­¦ä¹ åˆ†æ)                       â”‚
â”‚  èŒè´£: ORM æ˜ å°„ã€æ•°æ®æ¨¡å‹ã€å…³ç³»å®šä¹‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ ¸å¿ƒåŸºç¡€è®¾æ–½ (src/core/):
â”œâ”€â”€ config.py         # Pydantic Settings é…ç½®ç®¡ç†
â”œâ”€â”€ database.py       # å¼‚æ­¥æ•°æ®åº“è¿æ¥æ±  (SQLAlchemy 2.x)
â”œâ”€â”€ security.py       # JWT è®¤è¯ + å¤šç»´é™æµ (Token Bucket + Sliding Window)
â”œâ”€â”€ monitoring.py     # æ€§èƒ½ç›‘æ§æŒ‡æ ‡æ”¶é›† (MetricsCollector + SystemCollector)
â”œâ”€â”€ performance.py    # æ…¢æŸ¥è¯¢ç›‘å¬ + N+1 æ£€æµ‹
â”œâ”€â”€ logging.py        # ç»“æ„åŒ–æ—¥å¿—è®°å½• (JSON æ ¼å¼)
â””â”€â”€ exceptions.py     # ç»Ÿä¸€å¼‚å¸¸å®šä¹‰ (20+ å¼‚å¸¸ç±»å‹)
```

**æ¶æ„åŸåˆ™**:

- âœ… **ä¸¥æ ¼åˆ†å±‚**: API â†’ Service â†’ Repository â†’ Model (å•å‘ä¾èµ–)
- âœ… **å…¨å¼‚æ­¥**: æ‰€æœ‰ I/O æ“ä½œä½¿ç”¨ `async/await`
- âœ… **ä¾èµ–æ³¨å…¥**: FastAPI `Depends` æœºåˆ¶
- âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´ç±»å‹æ³¨è§£ + mypy strict æ£€æŸ¥
- âœ… **å•ä¸€èŒè´£**: æ¯ä¸ªæ¨¡å—èŒè´£æ¸…æ™°ï¼Œå‡½æ•° â‰¤ 60 è¡Œ
- âŒ **ç¦æ­¢è·¨å±‚**: ç¦æ­¢ API ç›´æ¥è°ƒç”¨ Repository

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
# å¿…éœ€
Python 3.11+         # åç«¯è¿è¡Œç¯å¢ƒ
Node.js 18+          # å‰ç«¯æ„å»ºç¯å¢ƒ
uv                   # Python å¿«é€ŸåŒ…ç®¡ç†å™¨ (æ¨è)

# å¯é€‰ (ç”Ÿäº§ç¯å¢ƒ)
PostgreSQL 14+       # ä¸»æ•°æ®åº“
Redis 6+             # ç¼“å­˜å’Œé™æµ
Nginx               # åå‘ä»£ç†
systemd             # æœåŠ¡ç®¡ç† (Linux)
```

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/hordu-ma/wuhao-tutor.git
cd wuhao-tutor
```

#### 2. åç«¯ç¯å¢ƒé…ç½®

```bash
# å®‰è£… uv (å¦‚æœæœªå®‰è£…)
curl -LsSf https://astral.sh/uv/install.sh | sh

# ä½¿ç”¨ uv åŒæ­¥ä¾èµ–
uv sync

# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp config/templates/.env.development .env

# ç¼–è¾‘ .env é…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡:
# - SQLALCHEMY_DATABASE_URI (é»˜è®¤ SQLite, ç”Ÿäº§ç”¨ PostgreSQL)
# - BAILIAN_APPLICATION_ID (é˜¿é‡Œäº‘ç™¾ç‚¼åº”ç”¨ ID)
# - BAILIAN_API_KEY (é˜¿é‡Œäº‘ç™¾ç‚¼ API Key, ç”Ÿäº§å¿…é¡» sk- å¼€å¤´)
# - SECRET_KEY (JWT å¯†é’¥, ç”Ÿäº§å¿…é¡»æ›´æ”¹é»˜è®¤å€¼)
# - REDIS_HOST (å¯é€‰, é»˜è®¤ localhost)
```

**å…³é”®é…ç½®è¯´æ˜**:

```env
# æ•°æ®åº“é…ç½® (å¼€å‘ç¯å¢ƒä½¿ç”¨ SQLite)
SQLALCHEMY_DATABASE_URI=sqlite+aiosqlite:///./data/local/wuhao_tutor.db

# ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ PostgreSQL
# SQLALCHEMY_DATABASE_URI=postgresql+asyncpg://user:pass@host:5432/db

# é˜¿é‡Œäº‘ç™¾ç‚¼é…ç½® (å¿…å¡«)
BAILIAN_APPLICATION_ID=your_app_id
BAILIAN_API_KEY=sk-your-api-key  # ç”Ÿäº§ç¯å¢ƒå¿…é¡» sk- å¼€å¤´
BAILIAN_TIMEOUT=120              # æ”¯æŒå›¾ç‰‡ OCR, é»˜è®¤ 120 ç§’

# Redis é…ç½® (å¯é€‰, ç”¨äºé™æµå’Œç¼“å­˜)
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=your_password   # ç”Ÿäº§ç¯å¢ƒè®¾ç½®å¯†ç 

# JWT é…ç½®
SECRET_KEY=your-secret-key-change-in-production  # ç”Ÿäº§å¿…é¡»æ›´æ”¹
ACCESS_TOKEN_EXPIRE_MINUTES=11520  # 8 å¤©
REFRESH_TOKEN_EXPIRE_MINUTES=43200 # 30 å¤©

# æ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_DIR=./uploads
UPLOAD_MAX_SIZE=10485760  # 10MB
```

#### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿è¡Œæ•°æ®åº“è¿ç§» (åˆ›å»ºæ‰€æœ‰è¡¨)
uv run alembic upgrade head

# åˆå§‹åŒ–ç¤ºä¾‹æ•°æ® (å¯é€‰, ç”¨äºå¼€å‘æµ‹è¯•)
uv run python scripts/init_database.py
```

**æ•°æ®åº“è¡¨ç»“æ„** (è‡ªåŠ¨åˆ›å»º):

- `users` - ç”¨æˆ·ä¿¡æ¯ (æ”¯æŒ K12 å…¨å­¦æ®µ)
- `chat_sessions` - é—®ç­”ä¼šè¯
- `questions` + `answers` - é—®ç­”è®°å½•
- `mistake_records` + `mistake_reviews` - é”™é¢˜å’Œå¤ä¹ 
- `knowledge_nodes` + `knowledge_relations` - çŸ¥è¯†å›¾è°±
- `learning_analytics` - å­¦ä¹ åˆ†ææ•°æ®

#### 4. å¯åŠ¨åç«¯æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼ (çƒ­é‡è½½)
uv run python src/main.py

# æˆ–ä½¿ç”¨ Make å‘½ä»¤
make dev

# æˆ–ä½¿ç”¨ uvicorn å‘½ä»¤ (æ‰‹åŠ¨æŒ‡å®šå‚æ•°)
uv run uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```

**åç«¯æœåŠ¡å¯åŠ¨ä¿¡æ¯**:

```
ğŸš€ åº”ç”¨å¯åŠ¨ä¸­...
âœ… æ€§èƒ½ç›‘æ§å·²å¯åŠ¨
âœ… FastAPI åº”ç”¨åˆ›å»ºå®Œæˆ
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete.
```

#### 5. å¯åŠ¨å‰ç«¯æœåŠ¡ (Web)

```bash
cd frontend

# å®‰è£…ä¾èµ– (é¦–æ¬¡è¿è¡Œ)
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

**å‰ç«¯æœåŠ¡å¯åŠ¨ä¿¡æ¯**:

```
VITE v5.1.4  ready in 1234 ms

âœ  Local:   http://localhost:5173/
âœ  Network: http://192.168.1.100:5173/
```

#### 6. é…ç½®å¾®ä¿¡å°ç¨‹åº (å¯é€‰)

**å°ç¨‹åºé…ç½®æ–‡ä»¶**: `miniprogram/config/index.js`

```javascript
const config = {
  environment: 'development', // æˆ– 'production'

  api: {
    // å¼€å‘ç¯å¢ƒè¿æ¥æœ¬åœ°
    baseUrl: 'http://localhost:8000',

    // ç”Ÿäº§ç¯å¢ƒè¿æ¥é˜¿é‡Œäº‘ (å½“å‰é»˜è®¤é…ç½®)
    // baseUrl: 'https://www.horsduroot.com',

    timeout: 120000, // 120 ç§’ (æ”¯æŒå›¾ç‰‡ä¸Šä¼ å’Œ AI å¤„ç†)
  },

  // å…¶ä»–é…ç½®...
}
```

**é‡è¦**:

- å½“å‰å°ç¨‹åºé»˜è®¤è¿æ¥**ç”Ÿäº§ç¯å¢ƒ** (`https://www.horsduroot.com`)
- æœ¬åœ°å¼€å‘éœ€è¦ä¿®æ”¹ `baseUrl` ä¸º `http://localhost:8000`
- å°ç¨‹åºéœ€è¦åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€ `miniprogram/` ç›®å½•

#### 7. è®¿é—®åº”ç”¨

| å…¥å£           | åœ°å€                                        | è¯´æ˜                  |
| -------------- | ------------------------------------------- | --------------------- |
| **Web å‰ç«¯**   | http://localhost:5173                       | Vue3 åº”ç”¨ä¸»ç•Œé¢       |
| **API æ–‡æ¡£**   | http://localhost:8000/docs                  | Swagger UI äº¤äº’å¼æ–‡æ¡£ |
| **ReDoc æ–‡æ¡£** | http://localhost:8000/redoc                 | ReDoc é£æ ¼ API æ–‡æ¡£   |
| **å¥åº·æ£€æŸ¥**   | http://localhost:8000/health                | æœåŠ¡å¥åº·çŠ¶æ€æ£€æŸ¥      |
| **æ€§èƒ½æŒ‡æ ‡**   | http://localhost:8000/api/v1/health/metrics | JSON æ ¼å¼æ€§èƒ½æŒ‡æ ‡     |
| **å¾®ä¿¡å°ç¨‹åº** | å¾®ä¿¡å¼€å‘è€…å·¥å…·                              | éœ€è¦å¾®ä¿¡å¼€å‘è€…è´¦å·    |

### å¼€å‘å·¥å…·å’Œå‘½ä»¤

#### Make å‘½ä»¤ (æ¨èä½¿ç”¨)

```bash
# åç«¯å¼€å‘
make dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
make test             # è¿è¡Œæµ‹è¯•å¥—ä»¶ + è¦†ç›–ç‡æŠ¥å‘Š
make lint             # ä»£ç æ ¼å¼åŒ– (black + flake8)
make type-check       # mypy ç±»å‹æ£€æŸ¥

# æ•°æ®åº“ç®¡ç†
make db-init          # æ‰§è¡Œ Alembic è¿ç§»åˆ°æœ€æ–°ç‰ˆæœ¬
make db-migrate       # åˆ›å»ºæ–°è¿ç§» (éœ€æ‰‹åŠ¨è¾“å…¥æè¿°)
make db-reset         # å¼€å‘ç¯å¢ƒé‡ç½® (âš ï¸ åˆ é™¤æ‰€æœ‰æ•°æ®)
make db-backup        # PostgreSQL ç”Ÿäº§å¤‡ä»½

# æ–‡æ¡£ç”Ÿæˆ
make schema           # å¯¼å‡º OpenAPI JSON åˆ° docs/api/openapi.json

# æ¸…ç†
make clean            # æ¸…ç†ç¼“å­˜ã€æ—¥å¿—ã€ä¸´æ—¶æ–‡ä»¶
```

#### æ‰‹åŠ¨è„šæœ¬

```bash
# ç¯å¢ƒè¯Šæ–­ (æ£€æŸ¥ä¾èµ–ã€é…ç½®ã€æ•°æ®åº“è¿æ¥)
uv run python scripts/diagnose.py

# æ•°æ®åº“è¿ç§»
uv run alembic upgrade head          # å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬
uv run alembic downgrade -1          # å›é€€ä¸€ä¸ªç‰ˆæœ¬
uv run alembic revision -m "æè¿°"    # åˆ›å»ºæ–°è¿ç§»

# åˆå§‹åŒ–æ•°æ®
uv run python scripts/init_database.py

# ä»£ç è´¨é‡
uv run black src/ tests/             # æ ¼å¼åŒ–ä»£ç 
uv run flake8 src/ tests/            # ä»£ç æ£€æŸ¥
uv run mypy src/                     # ç±»å‹æ£€æŸ¥
uv run pytest tests/ --cov=src/      # æµ‹è¯• + è¦†ç›–ç‡
```

#### å‰ç«¯å‘½ä»¤

```bash
cd frontend

npm run dev           # å¼€å‘æœåŠ¡å™¨
npm run build         # ç”Ÿäº§æ„å»º
npm run preview       # é¢„è§ˆç”Ÿäº§æ„å»º
npm run type-check    # TypeScript ç±»å‹æ£€æŸ¥
npm run lint          # ESLint æ£€æŸ¥
npm run format        # Prettier æ ¼å¼åŒ–
npm run test          # Vitest å•å…ƒæµ‹è¯•
npm run test:coverage # æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
```

### å¿«é€ŸéªŒè¯

#### 1. æµ‹è¯•åç«¯ API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# é¢„æœŸå“åº”
{
  "status": "healthy",
  "version": "0.1.0",
  "environment": "development"
}

# æµ‹è¯•å­¦ä¹ é—®ç­”ç«¯ç‚¹ (éœ€è¦å…ˆæ³¨å†Œ/ç™»å½•è·å– token)
# å‚è§ API æ–‡æ¡£: http://localhost:8000/docs
```

#### 2. æµ‹è¯•å‰ç«¯ç•Œé¢

1. æµè§ˆå™¨è®¿é—® http://localhost:5173
2. æ³¨å†Œæ–°ç”¨æˆ·æˆ–ä½¿ç”¨æµ‹è¯•è´¦å·
3. æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½:
   - ä½œä¸šé—®ç­”: æé—®å¹¶æŸ¥çœ‹ AI å›ç­”
   - é”™é¢˜æ‰‹å†Œ: æ·»åŠ é”™é¢˜ã€æ ‡è®°å¤ä¹ 
   - å­¦ä¹ åˆ†æ: æŸ¥çœ‹å­¦ä¹ ç»Ÿè®¡å›¾è¡¨

#### 3. æµ‹è¯•å¾®ä¿¡å°ç¨‹åº (å¯é€‰)

1. å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€ `miniprogram/` ç›®å½•
2. ä¿®æ”¹ `config/index.js` è¿æ¥æœ¬åœ°åç«¯
3. ç¼–è¯‘è¿è¡Œå¹¶æµ‹è¯•åŠŸèƒ½

### å¸¸è§é—®é¢˜

**é—®é¢˜ 1**: `uv sync` å¤±è´¥

```bash
# è§£å†³æ–¹æ³•: æ¸…ç†ç¼“å­˜é‡è¯•
uv cache clean
uv sync --no-cache
```

**é—®é¢˜ 2**: æ•°æ®åº“è¿ç§»å¤±è´¥

```bash
# å¼€å‘ç¯å¢ƒ: åˆ é™¤æ•°æ®åº“é‡æ–°åˆå§‹åŒ–
rm data/local/wuhao_tutor.db
uv run alembic upgrade head
```

**é—®é¢˜ 3**: å‰ç«¯æ— æ³•è¿æ¥åç«¯

- æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨ (http://localhost:8000/health)
- æ£€æŸ¥ `frontend/vite.config.ts` ä»£ç†é…ç½®
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å° CORS é”™è¯¯

**é—®é¢˜ 4**: å¾®ä¿¡å°ç¨‹åº API è°ƒç”¨å¤±è´¥

- æ£€æŸ¥ `miniprogram/config/index.js` çš„ `baseUrl`
- ç¡®è®¤å°ç¨‹åºåˆæ³•åŸŸåé…ç½® (ç”Ÿäº§ç¯å¢ƒ)
- æ£€æŸ¥å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸æ ¡éªŒåˆæ³•åŸŸåé€‰é¡¹ (å¼€å‘ç¯å¢ƒ)

æ›´å¤šé—®é¢˜å‚è§: [æ•…éšœæ’æŸ¥æ–‡æ¡£](docs/troubleshooting/)

---

## ğŸ“š é¡¹ç›®æ–‡æ¡£

### å¼€å‘æ–‡æ¡£

- [æ¶æ„æ¦‚è§ˆ](docs/architecture/overview.md) - å››å±‚æ¶æ„è®¾è®¡ã€æŠ€æœ¯é€‰å‹
- [æ•°æ®è®¿é—®å±‚](docs/architecture/data-access.md) - Repository æ¨¡å¼ã€æ•°æ®åº“è®¾è®¡
- [API ç«¯ç‚¹æ–‡æ¡£](docs/api/endpoints.md) - å®Œæ•´ API æ¸…å•å’Œä½¿ç”¨è¯´æ˜
- [å¼€å‘æŒ‡å—](docs/guide/development.md) - ç¯å¢ƒæ­å»ºã€å¼€å‘æµç¨‹ã€å·¥å…·ä½¿ç”¨

### éƒ¨ç½²æ–‡æ¡£

- **[ä¸€é”®éƒ¨ç½²è„šæœ¬](scripts/DEPLOY-README.md)** â­ - ç®€å•é«˜æ•ˆçš„ç”Ÿäº§éƒ¨ç½²å·¥å…·
- [ç”Ÿäº§éƒ¨ç½²æŒ‡å—](docs/deployment/production-deployment-guide.md) - systemd + Nginx å®Œæ•´éƒ¨ç½²æµç¨‹
- [æœ¬åœ°ä»£ç éªŒè¯](docs/deployment/local-code-verification.md) - éƒ¨ç½²å‰ä»£ç å®‰å…¨æ£€æŸ¥
- [RDS æ•°æ®åº“é…ç½®](docs/deployment/RDS_CONNECTION_GUIDE.md) - PostgreSQL è¿æ¥é…ç½®
- [Redis ç¼“å­˜é…ç½®](docs/deployment/REDIS_CONNECTION_GUIDE.md) - Redis è¿æ¥å’Œä½¿ç”¨
- [å®‰å…¨å¯†é’¥ç®¡ç†](docs/deployment/SECURITY_KEYS_GUIDE.md) - API Key å’Œå¯†é’¥é…ç½®

### é›†æˆæ–‡æ¡£

- [å‰ç«¯é›†æˆ](docs/integration/frontend.md) - Vue3 é›†æˆæ–¹æ¡ˆã€API è°ƒç”¨
- [å¾®ä¿¡å°ç¨‹åºå¼€å‘](docs/integration/wechat-miniprogram.md) - å°ç¨‹åºæ¶æ„å’Œå¼€å‘è§„èŒƒ
- [å¾®ä¿¡è®¤è¯é›†æˆ](docs/integration/wechat-auth.md) - å¾®ä¿¡ç™»å½•å’Œç”¨æˆ·ç»‘å®š

---

## ğŸ› ï¸ å¼€å‘è§„èŒƒ

### é¡¹ç›®ç»“æ„

```
wuhao-tutor/
â”œâ”€â”€ src/                          # åç«¯æºç 
â”‚   â”œâ”€â”€ api/v1/                   # API è·¯ç”±å±‚
â”‚   â”‚   â”œâ”€â”€ api.py               # ä¸»è·¯ç”±èšåˆ
â”‚   â”‚   â””â”€â”€ endpoints/           # å„æ¨¡å—ç«¯ç‚¹
â”‚   â”‚       â”œâ”€â”€ learning.py      # å­¦ä¹ é—®ç­” (25+ ç«¯ç‚¹)
â”‚   â”‚       â”œâ”€â”€ mistakes.py      # é”™é¢˜ç®¡ç† (10+ ç«¯ç‚¹)
â”‚   â”‚       â”œâ”€â”€ analytics.py     # å­¦ä¹ åˆ†æ (8+ ç«¯ç‚¹)
â”‚   â”‚       â”œâ”€â”€ knowledge_graph.py # çŸ¥è¯†å›¾è°±
â”‚   â”‚       â”œâ”€â”€ auth.py          # è®¤è¯æˆæƒ
â”‚   â”‚       â”œâ”€â”€ user.py          # ç”¨æˆ·ç®¡ç†
â”‚   â”‚       â””â”€â”€ file.py          # æ–‡ä»¶ä¸Šä¼ 
â”‚   â”œâ”€â”€ services/                # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ bailian_service.py   # AI æœåŠ¡ (1000+ è¡Œ)
â”‚   â”‚   â”œâ”€â”€ learning_service.py  # é—®ç­”ä¸šåŠ¡ (2400+ è¡Œ)
â”‚   â”‚   â”œâ”€â”€ mistake_service.py   # é”™é¢˜ä¸šåŠ¡ (1260+ è¡Œ)
â”‚   â”‚   â”œâ”€â”€ knowledge_graph_service.py
â”‚   â”‚   â”œâ”€â”€ analytics_service.py
â”‚   â”‚   â”œâ”€â”€ auth_service.py
â”‚   â”‚   â”œâ”€â”€ user_service.py
â”‚   â”‚   â”œâ”€â”€ file_service.py
â”‚   â”‚   â”œâ”€â”€ formula_service.py   # å…¬å¼æ¸²æŸ“
â”‚   â”‚   â”œâ”€â”€ ai_image_service.py  # å›¾ç‰‡è¯†åˆ«
â”‚   â”‚   â””â”€â”€ speech_recognition_service.py  # è¯­éŸ³è¯†åˆ«
â”‚   â”œâ”€â”€ repositories/            # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ base_repository.py   # æ³›å‹åŸºç±»
â”‚   â”‚   â”œâ”€â”€ mistake_repository.py
â”‚   â”‚   â”œâ”€â”€ learning_repository.py
â”‚   â”‚   â”œâ”€â”€ knowledge_graph_repository.py
â”‚   â”‚   â””â”€â”€ analytics_repository.py
â”‚   â”œâ”€â”€ models/                  # ORM æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ base.py             # BaseModel (UUID ä¸»é”® + æ—¶é—´æˆ³)
â”‚   â”‚   â”œâ”€â”€ user.py             # ç”¨æˆ· (æ”¯æŒ K12 å…¨å­¦æ®µ)
â”‚   â”‚   â”œâ”€â”€ learning.py         # ChatSession, Question, Answer
â”‚   â”‚   â”œâ”€â”€ study.py            # MistakeRecord, MistakeReview
â”‚   â”‚   â”œâ”€â”€ knowledge.py        # KnowledgeNode, KnowledgeRelation
â”‚   â”‚   â”œâ”€â”€ knowledge_graph.py  # çŸ¥è¯†å›¾è°±å…³è”è¡¨
â”‚   â”‚   â”œâ”€â”€ answer_quality.py   # ç­”é¢˜è´¨é‡è¯„åˆ†
â”‚   â”‚   â””â”€â”€ formula_cache.py    # å…¬å¼ç¼“å­˜
â”‚   â”œâ”€â”€ schemas/                # Pydantic æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ learning.py
â”‚   â”‚   â”œâ”€â”€ mistake.py
â”‚   â”‚   â”œâ”€â”€ analytics.py
â”‚   â”‚   â””â”€â”€ auth.py
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒåŸºç¡€è®¾æ–½
â”‚   â”‚   â”œâ”€â”€ config.py          # Pydantic Settings é…ç½®
â”‚   â”‚   â”œâ”€â”€ database.py        # å¼‚æ­¥æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ security.py        # JWT + é™æµ
â”‚   â”‚   â”œâ”€â”€ monitoring.py      # æ€§èƒ½ç›‘æ§
â”‚   â”‚   â”œâ”€â”€ performance.py     # æ…¢æŸ¥è¯¢ç›‘å¬
â”‚   â”‚   â”œâ”€â”€ logging.py         # ç»“æ„åŒ–æ—¥å¿—
â”‚   â”‚   â””â”€â”€ exceptions.py      # ç»Ÿä¸€å¼‚å¸¸
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ type_converters.py # ç±»å‹è½¬æ¢
â”‚   â”‚   â””â”€â”€ cache.py           # ç¼“å­˜è£…é¥°å™¨
â”‚   â””â”€â”€ main.py                # FastAPI åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ frontend/                   # Vue3 Web å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ stores/            # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ router/            # Vue Router
â”‚   â”‚   â”œâ”€â”€ api/               # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ styles/            # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ public/                # é™æ€èµ„æº
â”‚   â”œâ”€â”€ vite.config.ts         # Vite é…ç½®
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ miniprogram/               # å¾®ä¿¡å°ç¨‹åº
â”‚   â”œâ”€â”€ pages/                 # é¡µé¢ (15+ ä¸ª)
â”‚   â”‚   â”œâ”€â”€ index/            # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ learning/         # å­¦ä¹ é—®ç­”
â”‚   â”‚   â”œâ”€â”€ mistakes/         # é”™é¢˜æœ¬
â”‚   â”‚   â”œâ”€â”€ analysis/         # å­¦ä¹ åˆ†æ
â”‚   â”‚   â””â”€â”€ profile/          # ä¸ªäººä¸­å¿ƒ
â”‚   â”œâ”€â”€ components/            # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·æ¨¡å— (20+ ä¸ª)
â”‚   â”‚   â”œâ”€â”€ request.js        # ç½‘ç»œè¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ api.js            # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ auth.js           # è®¤è¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ cache-manager.js  # ç¼“å­˜ç®¡ç†
â”‚   â”‚   â””â”€â”€ error-handler.js  # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ app.json              # å°ç¨‹åºé…ç½®
â”‚
â”œâ”€â”€ alembic/                   # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ versions/             # è¿ç§»è„šæœ¬
â”‚   â””â”€â”€ env.py
â”‚
â”œâ”€â”€ scripts/                   # å¼€å‘è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh             # ä¸€é”®éƒ¨ç½² (ç”Ÿäº§)
â”‚   â”œâ”€â”€ start-dev.sh          # å¯åŠ¨å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ diagnose.py           # ç¯å¢ƒè¯Šæ–­
â”‚   â”œâ”€â”€ init_database.py      # åˆå§‹åŒ–æ•°æ®
â”‚   â””â”€â”€ sql/                  # SQL è„šæœ¬
â”‚
â”œâ”€â”€ tests/                     # æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ unit/                 # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/          # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ performance/          # æ€§èƒ½æµ‹è¯•
â”‚
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ api/                  # API æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture/         # æ¶æ„è®¾è®¡
â”‚   â”œâ”€â”€ deployment/           # éƒ¨ç½²æ–‡æ¡£
â”‚   â”œâ”€â”€ guide/                # ä½¿ç”¨æŒ‡å—
â”‚   â””â”€â”€ troubleshooting/      # æ•…éšœæ’æŸ¥
â”‚
â”œâ”€â”€ config/templates/          # é…ç½®æ¨¡æ¿
â”‚   â”œâ”€â”€ .env.development
â”‚   â”œâ”€â”€ .env.production
â”‚   â””â”€â”€ .env.testing
â”‚
â”œâ”€â”€ deploy/systemd/           # systemd æœåŠ¡é…ç½®
â”œâ”€â”€ nginx/                    # Nginx é…ç½®
â”œâ”€â”€ monitoring/               # Prometheus é…ç½®
â”œâ”€â”€ data/                     # æœ¬åœ°æ•°æ® (SQLite, çŸ¥è¯†åº“)
â”œâ”€â”€ uploads/                  # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”œâ”€â”€ logs/                     # æ—¥å¿—æ–‡ä»¶
â”‚
â”œâ”€â”€ pyproject.toml            # Python é¡¹ç›®é…ç½®
â”œâ”€â”€ alembic.ini              # Alembic é…ç½®
â”œâ”€â”€ Makefile                 # Make å‘½ä»¤
â”œâ”€â”€ README.md                # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ DEVELOPMENT_STATUS.md    # å¼€å‘çŠ¶æ€
â”œâ”€â”€ DEVELOPMENT_ROADMAP.md   # å¼€å‘è·¯çº¿å›¾
â””â”€â”€ CHANGELOG.md             # æ›´æ–°æ—¥å¿—
```

### Git æäº¤è§„èŒƒ

**Conventional Commits è§„èŒƒ**:

```
ç±»å‹(èŒƒå›´): ç®€æ´æè¿°

ç±»å‹ (å¿…å¡«):
- feat:     æ–°åŠŸèƒ½
- fix:      ä¿®å¤ bug
- docs:     æ–‡æ¡£æ›´æ–°
- refactor: é‡æ„ (ä¸å½±å“åŠŸèƒ½)
- test:     æµ‹è¯•ç›¸å…³
- chore:    æ„å»º/å·¥å…·é“¾æ›´æ–°
- perf:     æ€§èƒ½ä¼˜åŒ–
- style:    ä»£ç æ ¼å¼ (ä¸å½±å“é€»è¾‘)

èŒƒå›´ (å¯é€‰):
- learning:  å­¦ä¹ é—®ç­”
- mistake:   é”™é¢˜æ‰‹å†Œ
- analytics: å­¦ä¹ åˆ†æ
- auth:      è®¤è¯æˆæƒ
- api:       API å±‚
- ui:        å‰ç«¯ç•Œé¢
- miniprogram: å¾®ä¿¡å°ç¨‹åº

ç¤ºä¾‹:
feat(learning): æ·»åŠ æ•°å­¦å…¬å¼ KaTeX æ¸²æŸ“æ”¯æŒ
fix(mistake): ä¿®å¤è‰¾å®¾æµ©æ–¯å¤ä¹ ç®—æ³•é—´éš”è®¡ç®—é”™è¯¯
docs(readme): æ›´æ–°é¡¹ç›®æ¶æ„å’ŒåŠŸèƒ½è¯´æ˜
refactor(api): é‡æ„é”™é¢˜ API ä½¿ç”¨ BaseRepository
test(service): æ·»åŠ  MistakeService å•å…ƒæµ‹è¯•
chore(deps): å‡çº§ FastAPI åˆ° 0.104.1
perf(db): ä¼˜åŒ–çŸ¥è¯†å›¾è°±æŸ¥è¯¢ç´¢å¼•
```

**åˆ†æ”¯ç­–ç•¥**:

```
main         # ç”Ÿäº§ç¯å¢ƒä¸»åˆ†æ”¯
develop      # å¼€å‘ä¸»åˆ†æ”¯
feature/*    # åŠŸèƒ½åˆ†æ”¯ (ä» develop åˆ‡å‡º)
hotfix/*     # ç´§æ€¥ä¿®å¤ (ä» main åˆ‡å‡º)
release/*    # å‘å¸ƒåˆ†æ”¯

å·¥ä½œæµ:
1. ä» develop åˆ›å»º feature/xxx
2. å¼€å‘å¹¶æäº¤
3. PR åˆ° develop
4. Code Review
5. åˆå¹¶åˆ° develop
6. æµ‹è¯•é€šè¿‡ååˆå¹¶åˆ° main
7. æ‰“ tag å‘å¸ƒ
```

### ä»£ç è´¨é‡æ ‡å‡†

**Python åç«¯**:

```python
# 1. ç±»å‹æ³¨è§£ (å¿…é¡»)
async def create_mistake(
    self,
    db: AsyncSession,
    user_id: UUID,
    request: CreateMistakeRequest
) -> MistakeDetailResponse:
    """åˆ›å»ºé”™é¢˜è®°å½•"""
    # å®ç°...

# 2. é”™è¯¯å¤„ç† (å…·ä½“å¼‚å¸¸)
try:
    result = await self.bailian_service.chat(messages)
except BailianTimeoutError:
    raise ServiceError("AI æœåŠ¡è¶…æ—¶")
except BailianAuthError:
    raise ServiceError("AI æœåŠ¡è®¤è¯å¤±è´¥")

# 3. å•ä¸€èŒè´£ (å‡½æ•° â‰¤ 60 è¡Œ)
async def _calculate_mastery_score(
    self,
    review_count: int,
    correct_rate: float
) -> int:
    """è®¡ç®—æŒæ¡åº¦åˆ†æ•°"""
    # ç®€æ´å®ç°...
    return score

# 4. æ–‡æ¡£æ³¨é‡Š (Google é£æ ¼)
async def get_review_schedule(
    self,
    user_id: UUID,
    subject: Optional[str] = None
) -> List[ReviewTask]:
    """
    è·å–å¤ä¹ è®¡åˆ’

    Args:
        user_id: ç”¨æˆ· ID
        subject: å­¦ç§‘è¿‡æ»¤ (å¯é€‰)

    Returns:
        List[ReviewTask]: å¾…å¤ä¹ ä»»åŠ¡åˆ—è¡¨

    Raises:
        NotFoundError: ç”¨æˆ·ä¸å­˜åœ¨
    """
    pass
```

**ä»£ç æ£€æŸ¥å·¥å…·**:

```bash
# æ ¼å¼åŒ– (è‡ªåŠ¨ä¿®å¤)
uv run black src/ tests/ --line-length 88

# ä»£ç æ£€æŸ¥
uv run flake8 src/ tests/ --max-line-length 88

# ç±»å‹æ£€æŸ¥ (strict æ¨¡å¼)
uv run mypy src/ --strict

# æµ‹è¯• + è¦†ç›–ç‡
uv run pytest tests/ --cov=src/ --cov-report=html
```

**TypeScript å‰ç«¯**:

```typescript
// 1. ç±»å‹å®šä¹‰ (å¿…é¡»)
interface AskQuestionRequest {
  session_id: string
  content: string
  images?: string[]
}

// 2. Composition API (æ¨è)
import { ref, computed, onMounted } from 'vue'

export default defineComponent({
  setup() {
    const questions = ref<Question[]>([])
    const loading = ref(false)

    const fetchQuestions = async () => {
      loading.value = true
      try {
        questions.value = await api.getQuestions()
      } catch (error) {
        handleError(error)
      } finally {
        loading.value = false
      }
    }

    onMounted(fetchQuestions)

    return { questions, loading, fetchQuestions }
  },
})

// 3. é”™è¯¯å¤„ç†
try {
  await api.askQuestion(request)
} catch (error) {
  if (error.code === 'AUTH_ERROR') {
    router.push('/login')
  } else {
    ElMessage.error(error.message)
  }
}
```

**å‰ç«¯ä»£ç æ£€æŸ¥**:

```bash
# TypeScript ç±»å‹æ£€æŸ¥
npm run type-check

# ESLint æ£€æŸ¥
npm run lint

# Prettier æ ¼å¼åŒ–
npm run format

# å•å…ƒæµ‹è¯•
npm run test
```

### æ¶æ„è§„èŒƒ

**1. ä¸¥æ ¼åˆ†å±‚ (ç¦æ­¢è·¨å±‚è°ƒç”¨)**:

```python
âœ… æ­£ç¡®:
API â†’ Service â†’ Repository â†’ Model

âŒ é”™è¯¯:
API â†’ Repository  # è·³è¿‡ Service å±‚
Service â†’ Model  # è·³è¿‡ Repository å±‚
```

**2. ä¾èµ–æ³¨å…¥ (FastAPI Depends)**:

```python
from fastapi import Depends
from src.core.dependencies import get_db, get_current_user

@router.post("/ask")
async def ask_question(
    request: AskQuestionRequest,
    db: AsyncSession = Depends(get_db),
    current_user: User = Depends(get_current_user)
) -> AskQuestionResponse:
    service = LearningService(db)
    return await service.ask_question(current_user.id, request)
```

**3. å¼‚æ­¥ä¼˜å…ˆ (async/await)**:

```python
# âœ… æ‰€æœ‰ I/O æ“ä½œä½¿ç”¨ async
async def get_mistakes(self, user_id: UUID) -> List[Mistake]:
    return await self.repository.find_by_user(user_id)

# âŒ ç¦æ­¢é˜»å¡è°ƒç”¨
def get_mistakes(self, user_id: UUID) -> List[Mistake]:
    return self.repository.find_by_user(user_id)  # é˜»å¡!
```

**4. é…ç½®å¤–åŒ– (ç¯å¢ƒå˜é‡)**:

```python
# âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡
from src.core.config import get_settings
settings = get_settings()
api_key = settings.BAILIAN_API_KEY

# âŒ ç¦æ­¢ç¡¬ç¼–ç 
api_key = "sk-xxxxxxxxxxxx"  # å±é™©!
```

### æµ‹è¯•ç­–ç•¥

**å•å…ƒæµ‹è¯•** (Service å’Œ Repository):

```python
import pytest
from uuid import uuid4

@pytest.mark.asyncio
async def test_create_mistake(mistake_service):
    """æµ‹è¯•åˆ›å»ºé”™é¢˜"""
    request = CreateMistakeRequest(
        question_content="æµ‹è¯•é¢˜ç›®",
        subject="math",
        difficulty=3
    )

    result = await mistake_service.create_mistake(
        user_id=uuid4(),
        request=request
    )

    assert result.id is not None
    assert result.subject == "math"
    assert result.difficulty == 3
```

**é›†æˆæµ‹è¯•** (API ç«¯ç‚¹):

```python
@pytest.mark.asyncio
async def test_get_mistakes_list(client, auth_headers):
    """æµ‹è¯•é”™é¢˜åˆ—è¡¨æ¥å£"""
    response = await client.get(
        "/api/v1/mistakes",
        headers=auth_headers
    )

    assert response.status_code == 200
    data = response.json()
    assert "items" in data
    assert "total" in data
```

**æ€§èƒ½æµ‹è¯•** (åŸºå‡†æµ‹è¯•):

```python
@pytest.mark.benchmark
def test_knowledge_graph_query_performance(benchmark):
    """æµ‹è¯•çŸ¥è¯†å›¾è°±æŸ¥è¯¢æ€§èƒ½"""
    result = benchmark(
        lambda: get_knowledge_graph(user_id)
    )
    # æ–­è¨€ P95 < 100ms
    assert result.stats.percentile_95 < 0.1
```

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

```
ä»£ç è§„æ¨¡:
- Python åç«¯: ~20,000 è¡Œ (å«æœåŠ¡ã€æ¨¡å‹ã€API)
  - æ ¸å¿ƒæœåŠ¡: ~8,000 è¡Œ (BailianService, LearningService, MistakeService ç­‰)
  - æ•°æ®æ¨¡å‹: ~3,000 è¡Œ (15+ ä¸ªæ•°æ®è¡¨)
  - API ç«¯ç‚¹: ~4,000 è¡Œ (50+ ä¸ªç«¯ç‚¹)
  - åŸºç¡€è®¾æ–½: ~3,000 è¡Œ (config, security, monitoring, logging)
  - å·¥å…·è„šæœ¬: ~2,000 è¡Œ

- Vue å‰ç«¯: ~12,000 è¡Œ
  - ç»„ä»¶: ~6,000 è¡Œ (é—®ç­”ã€é”™é¢˜ã€åˆ†æç­‰)
  - Stores: ~2,000 è¡Œ (Pinia çŠ¶æ€ç®¡ç†)
  - è·¯ç”±: ~1,000 è¡Œ
  - å·¥å…·: ~1,500 è¡Œ
  - æ ·å¼: ~1,500 è¡Œ

- å¾®ä¿¡å°ç¨‹åº: ~8,000 è¡Œ
  - é¡µé¢: ~4,000 è¡Œ (15+ ä¸ªé¡µé¢)
  - ç»„ä»¶: ~2,000 è¡Œ
  - å·¥å…·: ~2,000 è¡Œ (ç½‘ç»œã€ç¼“å­˜ã€è®¤è¯ç­‰)

- æµ‹è¯•ä»£ç : ~4,000 è¡Œ
  - å•å…ƒæµ‹è¯•: ~2,500 è¡Œ
  - é›†æˆæµ‹è¯•: ~1,000 è¡Œ
  - æ€§èƒ½æµ‹è¯•: ~500 è¡Œ

æ€»è®¡: ~44,000 è¡Œä»£ç 

æ•°æ®åº“è¡¨:
- æ ¸å¿ƒè¡¨: 15+ ä¸ª
  - users (ç”¨æˆ·)
  - chat_sessions, questions, answers (é—®ç­”)
  - mistake_records, mistake_reviews (é”™é¢˜)
  - knowledge_nodes, knowledge_relations (çŸ¥è¯†å›¾è°±)
  - learning_analytics (å­¦ä¹ åˆ†æ)
  - answer_quality_scores (ç­”é¢˜è´¨é‡)
  - formula_cache (å…¬å¼ç¼“å­˜)

API ç«¯ç‚¹ç»Ÿè®¡:
- å­¦ä¹ é—®ç­”: 25+ ä¸ªç«¯ç‚¹
- é”™é¢˜ç®¡ç†: 10+ ä¸ªç«¯ç‚¹
- å­¦ä¹ åˆ†æ: 8+ ä¸ªç«¯ç‚¹
- çŸ¥è¯†å›¾è°±: 3+ ä¸ªç«¯ç‚¹
- ç”¨æˆ·è®¤è¯: 5+ ä¸ªç«¯ç‚¹
- æ–‡ä»¶ä¸Šä¼ : 3+ ä¸ªç«¯ç‚¹
- å¥åº·æ£€æŸ¥: 2+ ä¸ªç«¯ç‚¹
æ€»è®¡: 50+ ä¸ª RESTful API ç«¯ç‚¹

æµ‹è¯•è¦†ç›–ç‡ (pytest + pytest-cov):
- æ ¸å¿ƒæ¨¡å—: 80%+
- Service å±‚: 85%+
- Repository å±‚: 90%+
- API å±‚: 75%+
- æ€»ä½“è¦†ç›–: ~82%

æ€§èƒ½æŒ‡æ ‡ (ç”Ÿäº§ç¯å¢ƒå®æµ‹):
- API å“åº”æ—¶é—´: P50 < 100ms, P95 < 200ms, P99 < 500ms
- æ•°æ®åº“æŸ¥è¯¢: P50 < 20ms, P95 < 50ms, P99 < 100ms
- AI é—®ç­”å»¶è¿Ÿ: P50 < 2s, P95 < 3s, P99 < 5s (ä¸å«æµå¼)
- æ…¢æŸ¥è¯¢ç›‘æ§: è‡ªåŠ¨è®°å½• > 1.0 ç§’çš„æŸ¥è¯¢
- å¹¶å‘å¤„ç†: æ”¯æŒ 100+ å¹¶å‘è¯·æ±‚ (Uvicorn workers)

é™æµä¿æŠ¤ (å®é™…é…ç½®):
- IP å±‚: 100 è¯·æ±‚/åˆ†é’Ÿ
- ç”¨æˆ·å±‚: 50 è¯·æ±‚/åˆ†é’Ÿ
- AI æœåŠ¡: 20 è¯·æ±‚/åˆ†é’Ÿ
- ç™»å½•ç«¯ç‚¹: 10 è¯·æ±‚/åˆ†é’Ÿ

ä¾èµ–ç‰ˆæœ¬:
- Python æ ¸å¿ƒä¾èµ–: 30+ ä¸ª
- Vue å‰ç«¯ä¾èµ–: 40+ ä¸ª
- å°ç¨‹åºå·¥å…·: 20+ ä¸ªè‡ªå®šä¹‰å·¥å…·æ¨¡å—
```

---

## ğŸ”® æœªæ¥è§„åˆ’

è¯¦è§ [å¼€å‘è®¡åˆ’](DEVELOPMENT_ROADMAP.md) å’Œ [å¼€å‘è¿›åº¦](DEVELOPMENT_STATUS.md)

### çŸ­æœŸç›®æ ‡ (1-2 ä¸ªæœˆ)

**1. å‘é‡æ•°æ®åº“é›†æˆ (PGVector)**

- é›†æˆ PostgreSQL pgvector æ‰©å±•
- é”™é¢˜è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢
- ç›¸ä¼¼é—®é¢˜æ¨è
- çŸ¥è¯†ç‚¹èšç±»åˆ†æ

**2. æ¨èç³»ç»ŸåŸºç¡€ç‰ˆ**

- ååŒè¿‡æ»¤ç®—æ³•
- åŸºäºå­¦ä¹ è®°å½•çš„ç»ƒä¹ æ¨è
- åŸºäºçŸ¥è¯†ç‚¹æŒæ¡åº¦çš„å­¦ä¹ è·¯å¾„æ¨è
- ä¸ªæ€§åŒ–é¢˜ç›®éš¾åº¦è°ƒæ•´

**3. çŸ¥è¯†å›¾è°±å¢å¼º**

- å‰ç«¯ ECharts å¯è§†åŒ–ä¼˜åŒ–
- çŸ¥è¯†ç‚¹å±‚çº§å…³ç³»å±•ç¤º
- å­¦ä¹ è·¯å¾„äº¤äº’å¼è§„åˆ’
- è–„å¼±ç‚¹è‡ªåŠ¨è¯†åˆ«å’Œæé†’

**4. å°ç¨‹åºåŠŸèƒ½å¢å¼º**

- æ¶ˆæ¯æ¨é€ (å¤ä¹ æé†’ã€å­¦ä¹ æŠ¥å‘Š)
- ç¦»çº¿ç¼“å­˜ä¼˜åŒ–
- å›¾ç‰‡å‹ç¼©ä¼˜åŒ–
- è¯­éŸ³è¾“å…¥ä½“éªŒæ”¹è¿›

**5. æ€§èƒ½ä¼˜åŒ–**

- Redis ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- N+1 æŸ¥è¯¢æ¶ˆé™¤
- CDN é™æ€èµ„æºåŠ é€Ÿ

### ä¸­æœŸç›®æ ‡ (3-6 ä¸ªæœˆ)

**1. RAG è¯­ä¹‰å¢å¼º**

- å‘é‡åŒ–çŸ¥è¯†åº“æ„å»º
- è¯­ä¹‰æ£€ç´¢ + å…³é”®è¯æ£€ç´¢æ··åˆ
- ä¸Šä¸‹æ–‡çª—å£ä¼˜åŒ–
- æç¤ºè¯å·¥ç¨‹æ”¹è¿›

**2. åä½œå­¦ä¹ åŠŸèƒ½**

- å­¦ä¹ å°ç»„åˆ›å»ºå’Œç®¡ç†
- é—®é¢˜åˆ†äº«å’Œè®¨è®º
- äº’åŠ©ç­”ç–‘ç³»ç»Ÿ
- å­¦ä¹ æ’è¡Œæ¦œ

**3. å¤šæ¨¡æ€è¾“å…¥å¢å¼º**

- æ‰‹å†™è¯†åˆ« (æ•°å­¦å…¬å¼ã€ä¸­æ–‡)
- å›¾ç‰‡ OCR å‡†ç¡®ç‡æå‡
- è¯­éŸ³è¯†åˆ«å‡†ç¡®ç‡ä¼˜åŒ–
- è§†é¢‘è®²è§£æ”¯æŒ

**4. å­¦ä¹ æŠ¥å‘Šç”Ÿæˆ**

- å‘¨æŠ¥/æœˆæŠ¥è‡ªåŠ¨ç”Ÿæˆ
- å­¦ä¹ è¶‹åŠ¿åˆ†æ
- å®¶é•¿ç«¯æŸ¥çœ‹
- æ•™å¸ˆç«¯ç®¡ç†

**5. æ•°æ®åˆ†æå¢å¼º**

- å­¦ä¹ è¡Œä¸ºåˆ†æ
- çŸ¥è¯†ç‚¹è–„å¼±ç¯èŠ‚è¯†åˆ«
- å­¦ä¹ æ•ˆç‡è¯„ä¼°
- ä¸ªæ€§åŒ–å­¦ä¹ å»ºè®®

### é•¿æœŸæ„¿æ™¯ (6-12 ä¸ªæœˆ)

**1. å¤šå­¦ç§‘æ‰©å±•**

- ä»æ•°å­¦æ‰©å±•åˆ°è¯­æ–‡ã€è‹±è¯­
- ç‰©ç†ã€åŒ–å­¦ã€ç”Ÿç‰©å­¦ç§‘æ”¯æŒ
- å„å­¦ç§‘çŸ¥è¯†å›¾è°±æ„å»º
- è·¨å­¦ç§‘çŸ¥è¯†å…³è”

**2. è‡ªé€‚åº”å­¦ä¹ **

- åŠ¨æ€éš¾åº¦è°ƒæ•´
- å­¦ä¹ è·¯å¾„è‡ªé€‚åº”
- ä¸ªæ€§åŒ–æ¨èå¼•æ“
- å­¦ä¹ é£æ ¼è¯†åˆ«

**3. æ•™å¸ˆç®¡ç†ç«¯**

- ç­çº§ç®¡ç†
- ä½œä¸šæ‰¹æ”¹
- å­¦æƒ…åˆ†æ
- æ•™å­¦èµ„æºåº“

**4. å¼€æ”¾å¹³å°**

- æä¾› API æ¥å£
- æ”¯æŒç¬¬ä¸‰æ–¹é›†æˆ
- æ’ä»¶ç³»ç»Ÿ
- å¼€å‘è€…ç¤¾åŒº

**5. ç§»åŠ¨ç«¯åŸç”Ÿåº”ç”¨**

- iOS App (Swift)
- Android App (Kotlin)
- è·¨å¹³å°ä½“éªŒä¼˜åŒ–
- ç¦»çº¿æ¨¡å¼å¢å¼º

### æŠ€æœ¯å€ºåŠ¡å’Œä¼˜åŒ–

**è¿‘æœŸè®¡åˆ’**:

- [ ] Prometheus ç›‘æ§é›†æˆ
- [ ] Grafana ä»ªè¡¨æ¿é…ç½®
- [ ] CI/CD æµæ°´çº¿æ­å»º (GitHub Actions)
- [ ] å‰ç«¯å•å…ƒæµ‹è¯•è¦†ç›–ç‡æå‡
- [ ] API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆä¼˜åŒ–
- [ ] æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
- [ ] å¼‚å¸¸å¤„ç†æ ‡å‡†åŒ–
- [ ] æ—¥å¿—è„±æ•è§„åˆ™å®Œå–„

**ä¸­æœŸè®¡åˆ’**:

- [ ] å¾®æœåŠ¡æ¶æ„æ¢ç´¢
- [ ] Kubernetes éƒ¨ç½²æ–¹æ¡ˆ
- [ ] åˆ†å¸ƒå¼è¿½è¸ª (OpenTelemetry)
- [ ] A/B æµ‹è¯•æ¡†æ¶
- [ ] ç°åº¦å‘å¸ƒæœºåˆ¶
- [ ] æ•°æ®å¤‡ä»½è‡ªåŠ¨åŒ–
- [ ] ç¾éš¾æ¢å¤æ¼”ç»ƒ

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¦‚ä½•è´¡çŒ®

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

### å¼€å‘æµç¨‹

1. åœ¨ Issues ä¸­è®¨è®ºæ–°åŠŸèƒ½æˆ– Bug
2. è·å¾—è®¤å¯åå¼€å§‹å¼€å‘
3. ç¡®ä¿ä»£ç é€šè¿‡æ‰€æœ‰æµ‹è¯•
4. æ›´æ–°ç›¸å…³æ–‡æ¡£
5. æäº¤ PR å¹¶ç­‰å¾… Review

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ‘¥ ç»´æŠ¤è€…

- **hordu-ma** - [GitHub](https://github.com/hordu-ma)

---

## ğŸ“® è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: https://github.com/hordu-ma/wuhao-tutor
- é—®é¢˜åé¦ˆ: https://github.com/hordu-ma/wuhao-tutor/issues
- ç”Ÿäº§ç¯å¢ƒ: https://www.horsduroot.com
- å¥åº·æ£€æŸ¥: https://horsduroot.com/health

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©,è¯·ç»™å®ƒä¸€ä¸ª Star! â­**

Made with â¤ï¸ by hordu-ma

</div>
